<<<<<<< HEAD
{"version":3,"file":"articles/solides_platon/@solides_platon.js.map","sources":["articles/solides_platon/@solides_platon.js","$.js","platon.dodeca1.js","three.rotator.js","three.canvas.js","wdg.js","x-widget.js","platon.solide.js"],"sourcesContent":["var require = function() {\n    var modules = {};\n    \n    return function(id, body) {\n        var mod;\n        body = window[\"#\" + id];\n        if (typeof body === 'undefined') {\n            var err = new Error(\"Required module is missing: \" + id);   \n            console.error(err.stack);\n            throw err;\n        }\n        mod = modules[id];\n        if (typeof mod === 'undefined') {\n            mod = {exports: {}};\n            var exports = mod.exports;\n            body(exports, mod);\n            modules[id] = mod.exports;\n            mod = mod.exports;\n            //console.log(\"Module initialized: \" + id);\n        }\n        return mod;\n    };\n}();\nfunction addListener(e,l) {\n    if (window.addEventListener) {\n        window.addEventListener(e,l,false);\n    } else {\n        window.attachEvent('on' + e, l);\n    }\n};\n\naddListener(\n    'DOMContentLoaded',\n    function() {\n        document.body.parentNode.$data = {};\n        // Attach controllers.\n        try{require('x-widget')('platon.solide14','platon.solide',{faces: 6})}catch(x){console.error('Unable to initialize platon.solide!', x)}\ntry{require('x-widget')('platon.solide15','platon.solide',{faces: 4})}catch(x){console.error('Unable to initialize platon.solide!', x)}\ntry{require('x-widget')('platon.solide16','platon.solide',{faces: 8})}catch(x){console.error('Unable to initialize platon.solide!', x)}\ntry{require('x-widget')('platon.dodeca117','platon.dodeca1',{width: 320, height: 320})}catch(x){console.error('Unable to initialize platon.dodeca1!', x)}\ntry{require('x-widget')('platon.solide18','platon.solide',{faces: \"20a\"})}catch(x){console.error('Unable to initialize platon.solide!', x)}\ntry{require('x-widget')('platon.solide19','platon.solide',{faces: \"20b\"})}catch(x){console.error('Unable to initialize platon.solide!', x)}\n    }\n);\n","window['#$']=function(exports,module){  exports.config={\n    name:\"grenier\",\n    description:\"Articles concernant majoritairement l'algorithmie\",\n    author:\"Tolokoban\",\n    version:\"1.0.515\",\n    major:1,\n    minor:0,\n    revision:515,\n    date:new Date(2016,1,4,18,34,34)\n};\nvar currentLang = null;\r\nexports.lang = function(lang) {\r\n    if (lang === undefined) {\r\n        lang = window.localStorage.getItem(\"Language\");\r\n        if (!lang) {\r\n            lang = window.navigator.language;\r\n            if (!lang) {\r\n                lang = window.navigator.browserLanguage;\r\n                if (!lang) {\r\n                    lang = \"fr\";\r\n                }\r\n            }\r\n        }\r\n        lang = lang.substr(0, 2).toLowerCase();\r\n    }\r\n    currentLang = lang;\r\n    window.localStorage.setItem(\"Language\", lang);\r\n    return lang;\r\n};\r\nexports.intl = function(words, params) {\r\n    var dic = words[exports.lang()],\r\n    k = params[0],\r\n    txt, newTxt, i, c, lastIdx, pos;\r\n    if (!dic) {\r\n        //console.error(\"Missing internationalization for language : \\\"\" + exports.lang() + \"\\\"!\");\r\n        return k;\r\n    }\r\n    txt = dic[k];\r\n    if (!txt) {\r\n        //console.error(\"Missing internationalization [\" + exports.lang() + \"]: \\\"\" + k + \"\\\"!\");\r\n        return k;\r\n    }\r\n    if (params.length > 1) {\r\n        newTxt = \"\";\r\n        lastIdx = 0;\r\n        for (i = 0 ; i < txt.length ; i++) {\r\n            c = txt.charAt(i);\r\n            if (c === '$') {\r\n                newTxt += txt.substring(lastIdx, i);\r\n                i++;\r\n                pos = txt.charCodeAt(i) - 48;\r\n                if (pos < 0 || pos >= params.length) {\r\n                    newTxt += \"$\" + txt.charAt(i);\r\n                } else {\r\n                    newTxt += params[pos];\r\n                }\r\n                lastIdx = i + 1;\r\n            } else if (c === '\\\\') {\r\n                newTxt += txt.substring(lastIdx, i);\r\n                i++;\r\n                newTxt += txt.charAt(i);\r\n                lastIdx = i + 1;\r\n            }\r\n        }\r\n        newTxt += txt.substr(lastIdx);\r\n        txt = newTxt;\r\n    }\r\n    return txt;\r\n};\r\n }\n","window['#platon.dodeca1']=function(exports,module){  \"use strict\";\r\nvar ThreeCanvas = require(\"three.canvas\");\r\nvar Rotator = require(\"three.rotator\");\r\n\r\n\r\n/**\r\n * @example\r\n * var Dodeca1 = require(\"platon.dodeca1\");\r\n * var instance = new Dodeca1(opt);\r\n * @class Dodeca1\r\n */\r\nvar Dodeca1 = function(options) {\r\n    if (typeof options === 'undefined') options = {};\r\n    if (typeof options.faces === 'undefined') options.faces = 4;\r\n    if (typeof options.width === 'undefined') options.width = 280;\r\n    if (typeof options.height === 'undefined') options.height = 280;\r\n\r\n    this._params1 = [[0,1], [0,1], [0,1], [0,1], [0,1]];\r\n    this._params2 = [[0,1], [0,1], [0,1], [0,1], [0,1]];\r\n    \r\n    ThreeCanvas.call(this, {width: options.width, height: options.height});\r\n    this.addClass(\"platon-dodeca1\");\r\n\r\n    var grp = new THREE.Group();\r\n\r\n    grp.add( this.createPentagon() );\r\n    this.addChildren( grp );\r\n\r\n    this.camera.position.z = 9;\r\n\r\n    this.scene.add( grp );\r\n    this.root = grp;\r\n    this._rotator = new Rotator(grp);\r\n\r\n    var light = new THREE.HemisphereLight( 0xcceeff, 0x990000, 3.6 ); // soft white light\r\n    var light1 = new THREE.DirectionalLight( 0x997777, 5 );\r\n    var light2 = new THREE.DirectionalLight( 0x777799, 2 );\r\n    light1.position.set(43,13,5);\r\n    light2.position.set(-20,5,1);\r\n\r\n    this.scene.add( light1 );\r\n    this.scene.add( light2 );\r\n    this.scene.add( light );\r\n\r\n    this.start();\r\n\r\n    this.css('float', 'right');\r\n};\r\n\r\n// Extension of Widget.\r\nDodeca1.prototype = Object.create(ThreeCanvas.prototype);\r\nDodeca1.prototype.constructor = Dodeca1;\r\n\r\n/**\r\n * @return void\r\n */\r\nDodeca1.prototype.onRender = function(time, delta) {\r\n    //this.root.rotation.set(-.3,.1,0);\r\n    //return;\r\n    this._rotator.rotate( time * .3 );\r\n\r\n    var threshold = 1.1;\r\n    \r\n    var pentagons2 = this.pentagons2;\r\n    var Ta = 5000;\r\n    var Tb = 3000;\r\n    var Tc = 5000;\r\n    var Td = 3000;\r\n    time %= Ta + Tb + Tc + Td;\r\n\r\n    var step = 3;\r\n    if ( time < Ta ) {\r\n        step = 0;\r\n    }\r\n    else if ( time < Ta + Tb ) {\r\n        step = 1;\r\n    }\r\n    else if ( time < Ta + Tb + Tc ) {\r\n        step = 2;\r\n    }\r\n\r\n    console.info(\"[platon.dodeca1] step=...\", step);\r\n    if ( typeof this._lastStep === 'undefined' || this._lastStep > step ) {\r\n        // One more loop. Let's initialize random attributes.\r\n        this._params1.forEach(function (param) {\r\n            var a = Math.random() * .7;\r\n            var b = a + .3 + (.7 - a) * Math.random();\r\n            param[0] = a;\r\n            param[1] = b;\r\n        });\r\n        this._params2.forEach(function (param) {\r\n            var a = Math.random() * .7;\r\n            var b = a + .3 + (.7 - a) * Math.random();\r\n            param[0] = a;\r\n            param[1] = b;\r\n        });\r\n    }\r\n        \r\n    this.pentagons.forEach(function (pentagon, idx) {\r\n        var t = time;\r\n        var ang1, ang2;\r\n        var p1 = this._params1[idx];\r\n        var p2 = this._params2[idx];\r\n\r\n        var endA = Ta + p1[0] * Tb;\r\n        var endB = Ta + p1[1] * Tb;\r\n        var endC = Ta + Tb + Tc + p1[0] * Td;\r\n        var endD = Ta + Tb + Tc + p1[1] * Td;\r\n\r\n        if (t < endA) {\r\n            ang1 = threshold;\r\n        }\r\n        else if (t < endB) {\r\n            ang1 = threshold - 2 * threshold * (t - endA) / (endB - endA);\r\n        }\r\n        else if (t < endC) {\r\n            ang1 = -threshold;\r\n        }\r\n        else if (t < endD) {\r\n            ang1 = -threshold + 2 * threshold * (t - endC) / (endD - endC);\r\n        }\r\n        else {\r\n            ang1 = threshold;\r\n        }\r\n        \r\n        endA = Ta + p2[0] * Tb;\r\n        endB = Ta + p2[1] * Tb;\r\n        endC = Ta + Tb + Tc + p2[0] * Td;\r\n        endD = Ta + Tb + Tc + p2[1] * Td;\r\n\r\n        if (t < endA) {\r\n            ang2 = threshold;\r\n        }\r\n        else if (t < endB) {\r\n            ang2 = threshold - 2 * threshold * (t - endA) / (endB - endA);\r\n        }\r\n        else if (t < endC) {\r\n            ang2 = -threshold;\r\n        }\r\n        else if (t < endD) {\r\n            ang2 = -threshold + 2 * threshold * (t - endC) / (endD - endC);\r\n        }\r\n        else {\r\n            ang2 = threshold;\r\n        }\r\n        \r\n        pentagon.rotation.y = ang1;\r\n        var pentagon2 = pentagons2[idx];\r\n        pentagon2.rotation.y = ang2;\r\n    }, this);\r\n\r\n    this._lastStep = this._step;\r\n    this._step = step;\r\n};\r\n\r\n\r\n/**\r\n * @return void\r\n */\r\nDodeca1.prototype.createPentagon = function(radius) {\r\n    if (typeof radius === 'undefined') radius = 1;\r\n\r\n    var vertices = [];\r\n    var face = [];\r\n    var angle;\r\n    var i;\r\n    for( i=0 ; i<5 ; i++ ) {\r\n        angle = i * 2 * Math.PI / 5;\r\n        vertices.push([\r\n            radius * Math.cos( angle ),\r\n            radius * Math.sin( angle ),\r\n            0\r\n        ]);\r\n        face.push( i );\r\n    }\r\n    return this.createMesh({\r\n        vertices: vertices,\r\n        faces: [face],\r\n        doublesided: true\r\n    });\r\n};\r\n\r\n\r\nDodeca1.prototype.createPentagon2 = function(radius, material) {\r\n    if (typeof radius === 'undefined') radius = 1;\r\n\r\n    var angle = 4 * Math.PI / 5;\r\n    var dx = radius * Math.cos( angle );\r\n    var dy = radius * Math.sin( angle );\r\n    var vertices = [];\r\n    var face = [];\r\n    var i;\r\n    for( i=0 ; i<5 ; i++ ) {\r\n        angle = i * 2 * Math.PI / 5;\r\n        vertices.push([\r\n            radius * Math.cos( angle ) - dx,\r\n            radius * Math.sin( angle ) - dy,\r\n            0\r\n        ]);\r\n        face.push( i );\r\n    }\r\n    var grp = new THREE.Group();\r\n\r\n    grp.add(\r\n        this.createMesh({\r\n            vertices: vertices,\r\n            faces: [face],\r\n            doublesided: true,\r\n            material: material\r\n        })\r\n    );\r\n    // grp.add( this.createAxis() );\r\n    return grp;\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nDodeca1.prototype.addChildren = function(parent, radius) {\r\n    if (typeof radius === 'undefined') radius = 1;\r\n\r\n    var angle;\r\n    var x;\r\n    var y;\r\n    var pentagons = [];\r\n    var pentagons2 = [];\r\n    var container;\r\n    var pentagon;\r\n    var grp;\r\n    var pentagon2;\r\n    var grp2;\r\n    var i;\r\n    var R = radius * 2 * Math.cos( 0.3 * Math.PI );\r\n    var X = R * Math.cos( Math.PI / 10 );\r\n    var Y = R * Math.sin( Math.PI / 10 );\r\n\r\n    // grp -- container -- pentagon\r\n    //                  \\- grp2 -- pentagon2\r\n    for( i=0 ; i<5 ; i++ ) {\r\n        container = new THREE.Group();\r\n\r\n        angle = i * 2 * Math.PI / 5;\r\n        x = radius * Math.cos( angle );\r\n        y = radius * Math.sin( angle );\r\n        pentagon = this.createPentagon2( radius );\r\n        pentagons.push( container );\r\n        container.add( pentagon );\r\n        grp = new THREE.Group();\r\n        grp.add( container );\r\n        grp.position.x = x;\r\n        grp.position.y = y;\r\n        grp.rotation.z = angle - 0.2 * Math.PI;\r\n\r\n        pentagon2 = this.createPentagon2( radius );\r\n        pentagons2.push( pentagon2 );\r\n        grp2 = new THREE.Group();\r\n        grp2.add( pentagon2 );\r\n        grp2.position.x = X;\r\n        grp2.position.y = Y;\r\n        grp2.rotation.z = 0.2 * Math.PI;\r\n        container.add( grp2 );\r\n\r\n        parent.add( grp );\r\n    }\r\n    this.pentagons = pentagons;\r\n    this.pentagons2 = pentagons2;\r\n};\r\n\r\n\r\nDodeca1.create = function(opt) {\r\n    return new Dodeca1(opt);\r\n};\r\nmodule.exports = Dodeca1;\r\n }\n","window['#three.rotator']=function(exports,module){  /**\r\n * @example\r\n * var Rotator = require(\"three.rotator\");\r\n * var instance = new Rotator();\r\n * @class Rotator\r\n */\r\nvar Rotator = function(obj, sx, sy, sz) {\r\n    if (typeof sx === 'undefined') sx = 2500 + Math.random() * 500;\r\n    if (typeof sy === 'undefined') sy = 2500 + Math.random() * 500;\r\n    if (typeof sz === 'undefined') sz = 2500 + Math.random() * 500;\r\n\r\n    this.obj = obj;\r\n    this.sx = sx;\r\n    this.sy = sy;\r\n    this.sz = sz;\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nRotator.prototype.rotate = function(time, obj) {\r\n    if (typeof obj === 'undefined') obj = this.obj;\r\n\r\n    obj.rotation.x = time / this.sx;\r\n    obj.rotation.y = time / this.sy;\r\n    obj.rotation.y = time / this.sz;   \r\n};\r\n\r\nRotator.create = function() {\r\n    return new Rotator();\r\n};\r\nmodule.exports = Rotator;\r\n }\n","window['#three.canvas']=function(exports,module){  \"use strict\";\r\nvar Widget = require(\"wdg\");\r\n\r\nvar registeredAnimations = [];\r\n\r\nfunction animate(time) {\r\n    if (registeredAnimations.length > 0) {\r\n        registeredAnimations.forEach(function (item) {\r\n            item.render( time );\r\n        });\r\n        window.requestAnimationFrame( animate );\r\n    }\r\n}\r\n\r\nfunction Register(anim) {\r\n    if (registeredAnimations.indexOf(anim) == -1) {\r\n        registeredAnimations.push(anim);\r\n        if (registeredAnimations.length == 1) {\r\n            window.requestAnimationFrame( animate );\r\n        }\r\n    }\r\n}\r\n\r\nfunction Unregister(anim) {\r\n    var pos = registeredAnimations.indexOf(anim);\r\n    if (pos > -1) {\r\n        registeredAnimations.splice(pos, 1);\r\n    }\r\n}\r\n\r\n/**\r\n * @example\r\n * var Canvas = require(\"three.canvas\");\r\n * var options = {\r\n *    width: 640,\r\n *    height: 480\r\n * };\r\n * var instance = new Canvas(options);\r\n * @class Canvas\r\n */\r\nvar Canvas = function(options) {\r\n    Widget.call(this);\r\n    this.addClass(\"three-canvas\");\r\n\r\n    if (typeof options === 'undefined') options = {};\r\n    if (typeof options.width === 'undefined') options.width = window.innerWidth;\r\n    if (typeof options.height === 'undefined') options.height = window.innerHeight;\r\n\r\n    this.W = options.width;\r\n    this.H = options.height;\r\n    this.css({\r\n        width: this.W + \"px\",\r\n        height: this.H + \"px\"\r\n    });\r\n    this.scene = new THREE.Scene();\r\n    this.camera = new THREE.PerspectiveCamera( 45, this.W / this.H, 0.1, 1000 );\r\n    this.camera.position.z = 1.4;\r\n    this.renderer = new THREE.WebGLRenderer({ alpha: true });\r\n    this.renderer.setClearColor( 0xffffff, 0);\r\n    this.renderer.setSize( this.W, this.H );\r\n    this.append( this.renderer.domElement );\r\n    this._time = 0;\r\n};\r\n\r\n// Extension of Widget.\r\nCanvas.prototype = Object.create(Widget.prototype);\r\nCanvas.prototype.constructor = Canvas;\r\n\r\n/**\r\n * @return void\r\n */\r\nCanvas.prototype.render = function(time) {\r\n    if (this._time <= 0) this._time = time - 1;\r\n    this.onRender(time, time - this._time);\r\n    this.renderer.render( this.scene, this.camera );\r\n    this._time = time;\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nCanvas.prototype.onRender = function(time, delta) {};\r\n\r\n/**\r\n * @return void\r\n */\r\nCanvas.prototype.start = function() {\r\n    Register(this);\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nCanvas.prototype.stop = function() {\r\n    Unregister(this);\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nCanvas.prototype.createAxis = function() {\r\n    var grp = new THREE.Group();\r\n    grp.add(\r\n        this.createLine({\r\n            vertices: [[0,0,0], [1,0,0]],\r\n            color: 0xff0000\r\n        }),\r\n        this.createLine({\r\n            vertices: [[0,0,0], [0,1,0]],\r\n            color: 0x00ff00\r\n        }),\r\n        this.createLine({\r\n            vertices: [[0,0,0], [0,0,1]],\r\n            color: 0x0000ff\r\n        })\r\n    );\r\n    return grp;\r\n};\r\n\r\n\r\n/**\r\n * @return void\r\n */\r\nCanvas.prototype.createLine = function(opt) {\r\n    if (typeof opt === 'undefined') opt = { vertices: [] };\r\n    if (typeof opt.color === 'undefined') opt.color = 0xff0000;\r\n    if (typeof opt.linewidth === 'undefined') opt.linewidth = 1;\r\n\r\n\r\n    var mat = new THREE.LineBasicMaterial({\r\n        color: opt.color,\r\n        linewidth: opt.linewidth\r\n    });\r\n\r\n    var geo = new THREE.Geometry();\r\n    opt.vertices.forEach(function (vertex) {\r\n        geo.vertices.push(\r\n            new THREE.Vector3( vertex[0], vertex[1], vertex[2] )\r\n        );\r\n    });\r\n\r\n    return new THREE.Line( geo, mat );\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nCanvas.prototype.createMesh = function(opt) {\r\n    if (typeof opt === 'undefined') throw Error(\"[three.canvas.createMesh] Missing optument!\");\r\n    if (typeof opt.colors === 'undefined') opt.colors = [\r\n        new THREE.Color( .5 + Math.random() * .5, .5 + Math.random() * .5, .5 + Math.random() * .5 )\r\n    ];\r\n    if (typeof opt.nbColors === 'undefined') opt.nbColors = opt.colors.length;\r\n    if (typeof opt.solid === 'undefined') opt.solid = true;\r\n    if (typeof opt.wireframe === 'undefined') opt.wireframe = true;\r\n    if (typeof opt.wirecolor === 'undefined') opt.wirecolor = new THREE.Color( 0x333333 );\r\n    if (typeof opt.wirewidth === 'undefined') opt.wirewidth = 2;\r\n    if (typeof opt.doublesided === 'undefined') opt.doublesided = false;\r\n\r\n    if (typeof opt.mat === 'undefined') opt.mat = new THREE.MeshPhongMaterial({\r\n        specular: 0x333333,\r\n        shininess: 3.14,\r\n        metal: true,\r\n        vertexColors: THREE.VertexColors,\r\n        side: opt.doublesided ? THREE.DoubleSide : THREE.FrontSide,\r\n        transparent: true,\r\n        opacity: .9\r\n    });;\r\n\r\n    var grp = new THREE.Group();\r\n\r\n    if (opt.solid) {\r\n        var geo = new THREE.Geometry();\r\n        opt.vertices.forEach(function (vertex) {\r\n            geo.vertices.push( new THREE.Vector3( vertex[0], vertex[1], vertex[2] ) );\r\n        });\r\n        opt.faces.forEach(function (face, idxFace) {\r\n            addFace( geo, face, opt.colors[idxFace % opt.nbColors] );\r\n        });\r\n        geo.computeFaceNormals ();\r\n        geo.computeVertexNormals ();\r\n        grp.add( new THREE.Mesh( geo, opt.mat ) );\r\n    }\r\n\r\n    if (opt.wireframe) {\r\n        var mat = new THREE.LineBasicMaterial({ color: opt.wirecolor, linewidth: opt.wirewidth });\r\n        var cache = [];\r\n        opt.faces.forEach(function (face) {\r\n            var line;\r\n            var key, a, b, tmp;\r\n            for( var i=0 ; i<face.length ; i++ ) {\r\n                a = face[i];\r\n                b = face[(i + 1) % face.length];\r\n                if (b < a) {\r\n                    tmp = a;\r\n                    a = b;\r\n                    b = tmp;\r\n                }\r\n                key = a + \",\" + b;\r\n                if (cache.indexOf( key ) == -1) {\r\n                    cache.push( key );\r\n                    line = new THREE.Geometry();\r\n                    line.vertices.push(\r\n                        new THREE.Vector3( \r\n                            opt.vertices[a][0], opt.vertices[a][1], opt.vertices[a][2] ),\r\n                        new THREE.Vector3( \r\n                            opt.vertices[b][0], opt.vertices[b][1], opt.vertices[b][2] )\r\n                    );\r\n                    line.type = THREE.Lines;\r\n                    grp.add( new THREE.Line( line, mat ) );\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\nconsole.info(\"[three.canvas] grp=\", grp);\r\n    return grp;\r\n};\r\n\r\n\r\nfunction addFace(geometry, vertices, color) {\r\n    var faces = [];\r\n    if (vertices.length == 3) {\r\n        faces.push(\r\n            new THREE.Face3( vertices[0], vertices[1], vertices[2] )\r\n        );\r\n    }\r\n    else if (vertices.length == 4) {\r\n        faces.push(\r\n            new THREE.Face3( vertices[0], vertices[1], vertices[2] ),\r\n            new THREE.Face3( vertices[0], vertices[2], vertices[3] )\r\n        );\r\n    }\r\n    else {\r\n        // We use the fan method.\r\n        var x = 0, y = 0, z = 0;\r\n        vertices.forEach(function (idx) {\r\n            var vertex = geometry.vertices[vertices[idx]];\r\n            x += vertex.x;\r\n            y += vertex.y;\r\n            z += vertex.z;\r\n        });\r\n        x /= vertices.length;\r\n        y /= vertices.length;\r\n        z /= vertices.length;\r\n\r\n        var k = vertices.length;\r\n        geometry.vertices.push( new THREE.Vector3( x, y, z ) );\r\n\r\n        var i;\r\n        for( i=0 ; i<k ; i++ ) {\r\n            faces.push( new THREE.Face3( i, (i + 1) % k, k ) );\r\n        }\r\n    }\r\n\r\n    if (typeof color !== 'undefined') {\r\n        // Apply a color to this face.\r\n        faces.forEach(function (face) {\r\n            face.vertexColors[0] = face.vertexColors[1] = face.vertexColors[2] = color;\r\n        });\r\n    }\r\n\r\n    faces.forEach(function (face) {\r\n        geometry.faces.push(face);\r\n    });\r\n}\r\n\r\n\r\nCanvas.create = function(options) {\r\n    return new Canvas(options);\r\n};\r\nmodule.exports = Canvas;\r\n }\n","window['#wdg']=function(exports,module){  'use strict';\n\n/**\n * Widgets inherit this class.\n */\nfunction Widget(options) {\n    this.__data = {};\n    try {\n        var e;\n        if (typeof options === 'undefined') options = {};\n        if (typeof options.innerHTML !== 'undefined' && typeof options.childNodes !== 'undefined') {\n            // On passe directement un élément.\n            options = {element: options};\n        }\n        if (typeof options.tag === 'undefined') options.tag = \"div\";\n        if (options.element) {\n            this.element(options.element);\n        } else if (typeof options.id !== 'undefined') {\n            e = window.document.getElementById(options.id);\n            if (!e) {\n                throw Error(\"Can't find element with id: \\\"\" + options.id + \"\\\"!\");\n            }\n            this.element(e);\n        } else {\n            this.element(window.document.createElement(options.tag));\n            this.addClass(\"wdg\", \"custom\");\n        }\n    }\n    catch (ex) {\n        console.error(\"[widget] \", ex);\n        console.error(\"[Widget] \", JSON.stringify(options));\n        throw Error(ex);\n    }\n}\n\nWidget.prototype = {\n    /**\n     * Accessor for attribute element\n     * @return element\n     */\n    element: function(v) {\n        if (v === undefined) return this._element;\n        if (typeof v === 'string') {\n            v = window.document.querySelector(v);\n        }\n        this._element = v;\n        return this;\n    },\n\n    data: function(k, v) {\n        if (typeof v === 'undefined') {\n            return this.__data[k];\n        }\n        this.__data[k] = v;\n        return this;\n    },\n\n    /**\n     * @description\n     * Remove this element from its parent.\n     * @memberof wdg\n     */\n    detach: function() {\n        var e = this._element;\n        if (e) {\n            var p = e.parentNode;\n            if (p) {\n                p.removeChild(e);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     *\n     * @param name\n     * @memberof wdg\n     */\n    addEvent: function(name, slot, sender) {\n        if (typeof slot === 'string') {\n            var that = this, key = slot;\n            if (typeof sender === 'undefined') sender = this;\n            slot = function(x) {\n                var f = sender[key];\n                if (typeof f === 'function') {\n                    f.call(sender, x);\n                } else {\n                    throw Error(\"\\\"\" + slot + \"\\\" is not a function of: \" + sender);\n                }\n            };\n        }\n        var e = this.element();\n        if (name == 'tap') {\n            e.addEventListener(\n                \"mousedown\",\n                function(evt) {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                },\n                false\n            );\n            e.addEventListener(\n                \"mouseup\",\n                function(evt) {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                    slot(evt);\n                },\n                false\n            );\n            e.addEventListener(\"touchend\", slot, false);\n\n        } else {\n            e.addEventListener(name, slot, false);\n        }\n        return this;\n    },\n\n    /**\n     * Retire un attribut à l'élément sous-jacent.\n     * @example\n     * this.removeAttr(\"selected\");\n     * @memberof wdg\n     */\n    removeAttr: function() {\n        if (this._element) {\n            var i, arg;\n            for (i = 0 ; i < arguments.length ; i++) {\n                arg = arguments[i];\n                this._element.removeAttribute(arg);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * Teste l'existence d'un attribut dans l'élément sous-jacent.\n     * @memberof wdg\n     */\n    hasAttribute: function(key) {\n        if (!this._element) return false;\n        return this._element.hasAttribute(key);\n    },\n\n    /**\n     * Lit ou affecte la valeur d'un attribut de l'élément sous-jacent.\n     * @example\n     * // Le pseudo attribut '$' sert à insérer du texte.\n     * var div = new Widget();\n     * div.attr({$: 'Hello world!', title: 'Typical first sentence...'});\n     * @param key Nom de l'attribut ou dictionnaire des attributs.\n     * @param val [Facultatif] Valeur de l'attribut. Si elle est omise, la méthode retourne la valeur actuelle.\n     * @param ns [Facultatif] Namespace éventuel.\n     * @memberof wdg\n     */\n    attr: function(key, val, ns) {\n        var k;\n        if (!this._element || !this._element.getAttribute) return null;\n        if (typeof key == \"string\") {\n            if (val !== undefined) {\n                if (key == \"class\") {\n                    this._element.className = val;\n                    return this;\n                }\n                if (ns && this._element.setAttributeNS) {\n                    this._element.setAttributeNS(ns, key, val);\n                }\n                else {\n                    this._element.setAttribute(key, val);\n                }\n                return this;\n            }\n            return this._element.getAttribute(key);\n        }\n        if (typeof key == \"object\") {\n            for (k in key) {\n                if (k == \"class\") {\n                    this._element.className = key[k];\n                } else if (k == \"$\") {\n                    this.text(key[k]);\n                } else {\n                    this._element.setAttribute(k, key[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n\n    /**\n     * Permet de changer le style de l'élément sous-jacent.\n     * @example\n     * this.css(\"color\", \"red\");\n     * alert(this.css(\"display\"));\n     * this.css(\n     *   {\n     *     margin: \"0px\",\n     *     padding: \"3px\",\n     *     border: \"1px solid black\"\n     *   }\n     * );\n     * @param key Nom du champ de style ou dictionnaire clefs/valeurs.\n     * @param val  Valeur du champ key.  S'il est omis et  que \"key\"\n     * est  de type  string,  alors la  méthode  retourne la  valeur\n     * actuelle.\n     * @memberof wdg\n     */\n    css: function(key, val) {\n        var k, e = this._element;\n        if (!e) return null;\n        if (typeof e.style !== 'object') {\n            console.error(\"[wdg.css] This element does not support styles!\", e);\n            e.style = {};\n        }\n        if (typeof key == 'string') {\n            if (val) {\n                e.style[key] = val;\n                return this;\n            }\n            return e.style[key];\n        }\n        if (typeof key == 'object') {\n            for (k in key) {\n                try {\n                    e.style[k] = key[k];\n                } catch (x) {\n                    console.error(\"[wdg.css] Bad CSS attribute \" + k + \": \" + key[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n    insertAfter: function(target) {\n        if (typeof target.element === 'function') {\n            target = target.element();\n        }\n        target.parentNode.insertBefore(this.element(), target.nextSibling);\n        return this;\n    },\n\n    insertBefore: function(target) {\n        if (typeof target.element === 'function') {\n            target = target.element();\n        }\n        target.parentNode.insertBefore(this.element(), target);\n        return this;\n    },\n\n    /**\n     * Append children to this widget.\n     */\n    append: function() {\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (typeof arg === 'number') arg = \"\" + arg;\n            if (typeof arg === 'undefined' || (typeof arg !== 'object' && typeof arg !== 'string')) {\n                console.error(\"[Widget.append] Argument #\" + i + \" is invalid!\", arguments);\n                console.error(\"[Widget.append] Is type is: \" + (typeof arg));\n                continue;\n            };\n            if (typeof arg === 'string') {\n                if (arg.length < 1) arg = \" \";\n                arg = window.document.createTextNode(arg);\n                if (!arg) {\n                    console.error(\n                        \"[Widget.append] Unable to create a text node with this text: \", arg\n                    );\n                    console.error(\"[wdg] arguments=...\", arguments);\n                    throw Error(\n                        \"[Widget.append] Unable to create a text node with this text: \"\n                            + JSON.stringify(arg)\n                    );\n                }\n            }\n            if (Array.isArray(arg)) {\n                arg.forEach(\n                    function(item) {\n                        this.append(item);\n                    }, this\n                );\n            } else {\n                var e = typeof arg.element === 'function' ? arg.element() : arg;\n                this._element.appendChild(e);\n                /*\n                 if (typeof arg.onAppend === 'function') {\n                 arg.onAppend.call(arg);\n                 }\n                 */\n            }\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Append this widget to a parent.\n     * @param parent\n     * @memberof wdg\n     */\n    appendTo: function(parent) {\n        if (!parent) return this;\n        if (typeof parent.append === 'function') {\n            parent.append(this);\n        } else if (typeof parent.appendChild === 'function') {\n            parent.appendChild(this._element);\n            this.onAppend();\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Append this widget to BODY.\n     * @memberof wdg\n     */\n    appendToBody: function() {\n        window.document.body.appendChild(this._element);\n        return this;\n    },\n\n    hasClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (!e.contains(arg)) return false;\n        }\n        return true;\n    },\n\n    /**\n     * @description\n     * Add CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    addClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (typeof arg === 'string') {\n                arg = arg.trim();\n                if (arg.length > 0) e.add(arg);\n            } else {\n                console.error(\"[wdg.addClass] Arguments with bad type!\", arguments);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Remove CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    removeClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            e.remove(arg);\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Toggle CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    toggleClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            e.toggle(arg);\n        }\n        return this;\n    },\n\n    /**\n     * Remove all children of this widget.\n     * Any argument passed will be appended to this widget.\n     * @memberof wdg\n     */\n    clear: function() {\n        // (!) On préfère retirer les éléments un par un du DOM plutôt que d'utiliser simplement\n        // this.html(\"\").\n        // En effet, le code simplifié a des conséquences inattendues dans IE9 et IE10 au moins.\n        // Le bug des markers qui disparaissaients sur les cartes de Trail-Passion 4 a été corrigé\n        // avec cette modification.\n        var e = this.element();\n        while(e.firstChild){\n            e.removeChild(e.firstChild);\n        }\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            this.append(arg);\n        }\n\n        return this;\n    },\n\n    /**\n     * 1) Sans argument, cette  fonction retourne le texte contenu\n     * dans ce widget.\n     * 2) Avec  un texte en  argument, cette fonction  retire tous\n     * les  enfants de  ce widget  et  les remplace  par un  noeud\n     * texte.\n     * 3)  Avec un  élément  du DOM  en  argument, cette  fonction\n     * retourne le texte contenu par ce dernier.\n     * @memberof tfw.Widget\n     */\n    text: function(arg) {\n        var e, text, i, child;\n        if (typeof arg == 'string' || typeof arg == 'number') {\n            this.clear();\n            this._element.appendChild(window.document.createTextNode(arg));\n            return this;\n        } else {\n            // On retourne le contenu textuel de ce widget.\n            e = this._element;\n            if (arg !== undefined) {\n                // On peut passer un élément du DOM pour en extraire son contenu textuel.\n                e = arg;\n            }\n            text = \"\";\n            if (e.childNodes) {\n                for (i=0 ; i<e.childNodes.length ; i++) {\n                    child = e.childNodes[i];\n                    if (child.nodeType == 3) {\n                        if (child.nodeValue) {\n                            text += child.nodeValue;\n                        }\n                    } else {\n                        text += this.text( child );\n                    }\n                }\n            }\n            return text;\n        }\n    },\n\n    /**\n     * @description\n     *\n     * @param html\n     * @memberof wdg\n     */\n    html: function(html) {\n        if (typeof html === 'undefined') return this._element.innerHTML;\n        if (this._element) this._element.innerHTML = html;\n        return this;\n    },\n\n    /**\n     * @description\n     * If applicable, give focus to this element.\n     * @memberof wdg\n     */\n    focus: function() {\n        var e = this._element;\n        if (!e) return this;\n        if (typeof e.focus === 'function') {\n            e.focus();\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Returns the bounds of the underlying element.\n     * @memberof wdg\n     */\n    rect: function() {\n        var e = this._element;\n        if (!e) return null;\n        return e.getBoundingClientRect();\n    },\n\n    /**\n     * @description\n     *\n     * @param\n     * @memberof wdg\n     */\n    Tap: function(slot, sender) {\n        if (typeof slot === 'undefined') return this._Tap;\n        var that = this;\n        if (typeof sender === 'undefined') sender = that;\n        if (typeof slot === 'string') slot = sender[slot];\n        if (!this._Tap) {\n            this.activatePointerEvents();\n        }\n        this._Tap = [slot, sender];\n        return this;\n    }\n};\n\n/**\n * @return void\n */\nWidget.prototype.activatePointerEvents = function() {\n    if (this._pointerEvents) return this;\n    this._pointerEvents = {start: 0};\n\n    /*\n     interact(this.element()).on(\"tap\", function(evt) {\n     var slot = that._Tap;\n     if (slot) {\n     slot[0].call(slot[1], {x: evt.x, y: evt.y});\n     }\n     });\n     return this;\n     */\n    var pe = this._pointerEvents;\n    var that = this;\n    this.addEvent(\n        \"touchstart\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            pe.touch = 1;\n            pe.start = Date.now();\n        }\n    );\n    this.addEvent(\n        \"touchend\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            var tap = that._Tap;\n            if (!tap) return;\n            pe.touch = 0;\n            var delta = Date.now() - pe.start;\n            if (delta > 50) {\n                tap[0].call(tap[1], evt);\n            }\n        }\n    );\n    this.addEvent(\n        \"mousedown\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            if (pe.touch) return;\n            pe.start = Date.now();\n        }\n    );\n    this.addEvent(\n        \"mouseup\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            var tap = that._Tap;\n            if (!tap) return;\n            var delta = Date.now() - pe.start;\n            if (delta > 50) {\n                tap[0].call(tap[1], evt);\n            }\n        }\n    );\n\n    return this;\n};\n\n/**\n * @return void\n */\nWidget.prototype.div = function() {\n    var div = new Widget();\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.prototype.tag = function(tag) {\n    if (typeof tag === 'undefined') tag = 'div';\n    var div = new Widget({tag: tag});\n    for (var i = 1 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\n/**\n * @return void\n */\nWidget.prototype.isInDOM = function() {\n    return Widget.isInDOM(this.element());\n};\n\n/**\n * Fonction à surcharger  si on veut réagir lors de  l'insertion dans le\n * DOM.\n */\nWidget.prototype.onAppend = function() {};\n\nWidget.create = function(args) {\n    return new Widget(args);\n};\n\nWidget.find = function(query) {\n    return new Widget({element: window.document.querySelector(query)});\n};\n\n\n/**\n * Create a SVG élément with attributes.\n */\nWidget.svg = function(tag, attribs) {\n    var namespace = \"http://www.w3.org/2000/svg\";\n    if (typeof tag === 'object') {\n        attribs = tag;\n        tag = \"svg\";\n    }\n    if (typeof tag !== 'string') tag = 'svg';\n    var e = window.document.createElementNS(namespace, tag);\n    var w = new Widget({element: e});\n    if (typeof attribs === 'undefined') attribs = {};\n    if (tag == 'svg') {\n        if (typeof attribs.version === 'undefined') attribs.version = \"1.1\";\n        if (typeof attribs['xmlns:svg'] === 'undefined') {\n            attribs['xmlns:svg'] = 'http://www.w3.org/2000/svg';\n        }\n        if (typeof attribs['xmlns'] === 'undefined') {\n            attribs['xmlns'] = 'http://www.w3.org/2000/svg';\n        }\n        if (typeof attribs['xmlns:xlink'] === 'undefined') {\n            attribs['xmlns:xlink'] = 'http://www.w3.org/1999/xlink';\n        }\n        if (typeof attribs.viewBox === 'undefined'\n            && typeof attribs.width === 'number'\n            && typeof attribs.height === 'number')\n        {\n            attribs.viewBox = \"0 0 \" + attribs.width + \" \" + attribs.height;\n        }\n    }\n    if (typeof attribs === 'object') {\n        w.attr(attribs);\n    }\n    return w;\n};\n\n/**\n * Tester si le widget ou élément est actuellement attaché au DOM.\n */\nWidget.isInDOM = function(e) {\n    if (!e) return false;\n    if (typeof e.element === 'function') {\n        e = e.element();\n    }\n    if (e === window.document) return true;\n    return Widget.isInDOM(e.parentNode);\n};\n\n/**\n * Create a `span` with a text or an HTML content.\n * If `txt` starts with `<html>`, we set an HTML content.\n */\nWidget.fromTextOrHtml = function(txt) {\n    var e = Widget.span();\n    if (txt.substr(0, 6) == '<html>') {\n        e.html(txt.substr(6));\n    } else {\n        e.text(txt);\n    }\n    return e;\n};\n\n/**\n * Create a DIV and apply all arguments as classes to it.\n */\nWidget.div = function() {\n    var div = new Widget({tag: \"div\"});\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\n/**\n * Create a SPAN and apply all arguments as classes to it.\n */\nWidget.span = function() {\n    var div = new Widget({tag: \"span\"});\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.tag = function(tag) {\n    if (typeof tag === 'undefined') tag = 'div';\n    var div = new Widget({tag: tag});\n    for (var i = 1 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.id = function(id) {\n    return new Widget({element: window.document.getElementById(id)});\n};\n\n/**\n * Widget defining the `document.body` element.\n */\nWidget.body = new Widget(window.document.body);\n\nmodule.exports = Widget;\n\n\n\n/*\n * classList.js: Cross-browser full element.classList implementation.\n * 2014-07-23\n *\n * http://purl.eligrey.com/github/classList.js/blob/master/classList.js\n *\n * By Eli Grey, http://eligrey.com\n * Public Domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */\n\n// Full polyfill for browsers with no classList support\nif (!(\"classList\" in window.document.createElement(\"_\"))) {\n    (function () {\n        \"use strict\";\n\n        if (!('Element' in window)) return;\n\n        var classListProp = \"classList\";\n        var protoProp = \"prototype\";\n        var elemCtrProto = window.Element[protoProp];\n        var objCtr = Object;\n        var strTrim = String.prototype.trim || function () {\n            var rx = new RegExp(\"^\\\\s+|\\\\s+$\", \"g\");\n            return this.replace(rx, '');\n        };\n        var arrIndexOf = Array[protoProp].indexOf || function (item) {\n            var\n            i = 0\n            , len = this.length\n            ;\n            for (; i < len; i++) {\n                if (i in this && this[i] === item) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n        // Vendors: please allow content code to instantiate DOMExceptions\n        , DOMEx = function (type, message) {\n            this.name = type;\n            this.code = DOMException[type];\n            this.message = message;\n        }\n        , checkTokenAndGetIndex = function (classList, token) {\n            if (token === \"\") {\n                throw new DOMEx(\n                    \"SYNTAX_ERR\"\n                    , \"An invalid or illegal string was specified\"\n                );\n            }\n            if ((new RegExp(\"\\\\s\")).test(token)) {\n                throw new DOMEx(\n                    \"INVALID_CHARACTER_ERR\"\n                    , \"String contains an invalid character\"\n                );\n            }\n            return arrIndexOf.call(classList, token);\n        }\n        , ClassList = function (elem) {\n            var\n            trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n            , classes = trimmedClasses ? trimmedClasses.split(new RegExp(\"\\\\s+\")) : []\n            , i = 0\n            , len = classes.length\n            ;\n            for (; i < len; i++) {\n                this.push(classes[i]);\n            }\n            this._updateClassName = function () {\n                elem.setAttribute(\"class\", this.toString());\n            };\n        }\n        , classListProto = ClassList[protoProp] = []\n        , classListGetter = function () {\n            return new ClassList(this);\n        }\n        ;\n\n        // Most DOMException implementations don't allow calling DOMException's toString()\n        // on non-DOMExceptions. Error's toString() is sufficient here.\n        DOMEx[protoProp] = Error[protoProp];\n        classListProto.item = function (i) {\n            return this[i] || null;\n        };\n        classListProto.contains = function (token) {\n            token += \"\";\n            return checkTokenAndGetIndex(this, token) !== -1;\n        };\n        classListProto.add = function () {\n            var\n            tokens = arguments\n            , i = 0\n            , l = tokens.length\n            , token\n            , updated = false\n            ;\n            do {\n                token = tokens[i] + \"\";\n                if (checkTokenAndGetIndex(this, token) === -1) {\n                    this.push(token);\n                    updated = true;\n                }\n            }\n            while (++i < l);\n\n            if (updated) {\n                this._updateClassName();\n            }\n        };\n        classListProto.remove = function () {\n            var\n            tokens = arguments\n            , i = 0\n            , l = tokens.length\n            , token\n            , updated = false\n            , index\n            ;\n            do {\n                token = tokens[i] + \"\";\n                index = checkTokenAndGetIndex(this, token);\n                while (index !== -1) {\n                    this.splice(index, 1);\n                    updated = true;\n                    index = checkTokenAndGetIndex(this, token);\n                }\n            }\n            while (++i < l);\n\n            if (updated) {\n                this._updateClassName();\n            }\n        };\n        classListProto.toggle = function (token, force) {\n            token += \"\";\n\n            var\n            result = this.contains(token)\n            , method = result ?\n                force !== true && \"remove\"\n                :\n                force !== false && \"add\"\n            ;\n\n            if (method) {\n                this[method](token);\n            }\n\n            if (force === true || force === false) {\n                return force;\n            } else {\n                return !result;\n            }\n        };\n        classListProto.toString = function () {\n            return this.join(\" \");\n        };\n\n        if (objCtr.defineProperty) {\n            var classListPropDesc = {\n                get: classListGetter, enumerable: true, configurable: true\n            };\n            try {\n                objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n            } catch (ex) { // IE 8 doesn't support enumerable:true\n                if (ex.number === -0x7FF5EC54) {\n                    classListPropDesc.enumerable = false;\n                    objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n                }\n            }\n        } else if (objCtr[protoProp].__defineGetter__) {\n            elemCtrProto.__defineGetter__(classListProp, classListGetter);\n        }\n    }());\n} else {\n    // There is full or partial native classList support, so just check if we need\n    // to normalize the add/remove and toggle APIs.\n    (function () {\n        \"use strict\";\n\n        var testElement = window.document.createElement(\"_\");\n\n        testElement.classList.add(\"c1\", \"c2\");\n\n        // Polyfill for IE 10/11 and Firefox <26, where classList.add and\n        // classList.remove exist but support only one argument at a time.\n        if (!testElement.classList.contains(\"c2\")) {\n            var createMethod = function(method) {\n                var original = DOMTokenList.prototype[method];\n\n                DOMTokenList.prototype[method] = function(token) {\n                    var i, len = arguments.length;\n\n                    for (i = 0; i < len; i++) {\n                        token = arguments[i];\n                        original.call(this, token);\n                    }\n                };\n            };\n            createMethod('add');\n            createMethod('remove');\n        }\n\n        testElement.classList.toggle(\"c3\", false);\n\n        // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n        // support the second argument.\n        if (testElement.classList.contains(\"c3\")) {\n            var _toggle = DOMTokenList.prototype.toggle;\n\n            DOMTokenList.prototype.toggle = function(token, force) {\n                if (1 in arguments && !this.contains(token) === !force) {\n                    return force;\n                } else {\n                    return _toggle.call(this, token);\n                }\n            };\n\n        }\n        testElement = null;\n    }());\n}\n }\n","window['#x-widget']=function(exports,module){  \"use strict\";\n\n\nmodule.exports = function(id, modName, args) {\n    var dst = document.getElementById(id);\n    if (!dst) {\n        // This widget does not exist!\n        return;\n    }\n    var module = require(modName);\n    var src = new module(args);\n    src.element().$ctrl = src;\n    src = src.element();\n    src.setAttribute('id', id);\n    dst.parentNode.replaceChild(src, dst);\n};\n }\n","window['#platon.solide']=function(exports,module){  \"use strict\";\r\nvar ThreeCanvas = require(\"three.canvas\");\r\nvar Rotator = require(\"three.rotator\");\r\n\r\n\r\n/**\r\n * @example\r\n * var Solide = require(\"platon.solide\");\r\n * var instance = new Solide();\r\n * @class Solide\r\n */\r\nvar Solide = function(options) {\r\n    if (typeof options === 'undefined') options = {};\r\n    if (typeof options.faces === 'undefined') options.faces = 4;\r\n    if (typeof options.width === 'undefined') options.width = 150;\r\n    if (typeof options.height === 'undefined') options.height = 150;\r\n\r\n\r\n    ThreeCanvas.call(this, {width: options.width, height: options.height});\r\n    this.addClass(\"platon-solide\");\r\n\r\n    this.camera.position.z = 2.7;\r\n\r\n    var light = new THREE.HemisphereLight( 0xcceeff, 0x990000, 3.6 ); // soft white light\r\n    var light1 = new THREE.DirectionalLight( 0x997777, 5 );\r\n    var light2 = new THREE.DirectionalLight( 0x777799, 2 );\r\n    light1.position.set(43,13,5);\r\n    light2.position.set(-20,5,1);\r\n\r\n    var cube = this.createSolid( options.faces );\r\n\r\n    this.scene.add( cube );\r\n    this.scene.add( light1 );\r\n    this.scene.add( light2 );\r\n    this.scene.add( light );\r\n\r\n    this._rotator = new Rotator( cube );    \r\n\r\n    this.start();\r\n};\r\n\r\n// Extension of Widget.\r\nSolide.prototype = Object.create(ThreeCanvas.prototype);\r\nSolide.prototype.constructor = Solide;\r\n\r\n/**\r\n * @return void\r\n */\r\nSolide.prototype.onRender = function(time, delta) {\r\n    ThreeCanvas.prototype.onRender.call( this, time, delta );\r\n\r\n    this._rotator.rotate( time );\r\n\r\n    if (this._blinker) {\r\n        var opacity = Math.cos(time * 0.0001 * Math.PI);\r\n        if (opacity > 0.2) {\r\n            opacity = Math.min( 1, (opacity - .2) * 5 );\r\n            this._blinker.visible = true;\r\n            this._blinker.children.forEach(function (line) {\r\n                line.material.opacity = opacity;\r\n            });\r\n        } else {\r\n            this._blinker.visible = false;\r\n        }\r\n    }\r\n/*\r\n    var x = 20 * Math.abs(Math.cos(time / (sx + sy + sz)));\r\n    var y = 2 * Math.cos(3 * time / (sx + sy + sz));\r\n    this.css('transform', 'translate(-' + x + 'em,' + y + 'em)');\r\n*/\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nSolide.prototype.getTetrahedronGeometry = function(radius) {\r\n    if (typeof radius === 'undefined') radius = 1;\r\n\r\n    var k = radius / Math.sqrt(3);\r\n    return {\r\n        vertices: [ [ k, k, k], [-k, k,-k], [ k,-k,-k], [-k,-k, k] ],\r\n        faces: [ [0,1,3], [0,2,1], [0,3,2], [1,2,3] ]\r\n    };\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nSolide.prototype.getCubeGeometry = function(radius) {\r\n    if (typeof radius === 'undefined') radius = 1;\r\n\r\n    var k = radius / Math.sqrt(3);\r\n    return {\r\n        vertices: [\r\n            [ k, k, k], [ k, k,-k], [-k, k,-k], [-k, k, k],\r\n            [ k,-k, k], [ k,-k,-k], [-k,-k,-k], [-k,-k, k]\r\n        ],\r\n        faces: [\r\n            [0,1,2,3], [0,4,5,1], [1,5,6,2],\r\n            [4,7,6,5], [2,6,7,3], [0,3,7,4],\r\n        ]\r\n    };\r\n};\r\n\r\nSolide.prototype.getDodecahedronGeometry = function(radius) {\r\n    if (typeof radius === 'undefined') radius = 1;\r\n\r\n    var k = radius;\r\n    return {\r\n        vertices: [\r\n            [ 0, k, 0], [ k, 0, 0], [ 0, 0,-k],\r\n            [-k, 0, 0], [ 0, 0, k], [ 0,-k, 0]\r\n        ],\r\n        faces: [\r\n            [0,1,2], [0,2,3], [0,3,4], [0,4,1],\r\n            [5,4,3], [5,1,4], [5,2,1], [5,3,2],\r\n        ]\r\n    };\r\n};\r\n\r\n\r\nSolide.prototype.getIcosahedronGeometryA = function(radius) {\r\n    if (typeof radius === 'undefined') radius = 1;\r\n\r\n    var k = radius;\r\n    var vertices = [[0,k,0]];\r\n    var faces = [];\r\n    var i, ang;\r\n    var r = .3 * k;\r\n    var y = .2;\r\n\r\n    for ( i=0 ; i<5 ; i++ ) {\r\n        ang = i * 2 * Math.PI / 5;\r\n        vertices.push( [r * Math.cos( ang ), y, r * Math.sin( ang )] );\r\n        if (i < 4) {\r\n            faces.push( [0, i + 2, i + 1] );\r\n        } else {\r\n            faces.push( [0, 1, 5] );\r\n        }\r\n    }\r\n\r\n    for ( i=0 ; i<5 ; i++ ) {\r\n        ang = Math.PI / 5 + i * 2 * Math.PI / 5;\r\n        vertices.push( [r * Math.cos( ang ), -y, r * Math.sin( ang )] );\r\n        if (i < 4) {\r\n            faces.push( [11, i + 6, i + 7] );\r\n        } else {\r\n            faces.push( [11, 10, 6] );\r\n        }\r\n    }\r\n    vertices.push( [0,-k,0] );\r\n\r\n    return {\r\n        vertices: vertices,\r\n        faces: faces\r\n    };\r\n};\r\n\r\n\r\nSolide.prototype.getIcosahedronGeometryB = function(radius) {\r\n    if (typeof radius === 'undefined') radius = 1;\r\n\r\n    var k = radius;\r\n    var vertices = [[0,k,0]];\r\n    var faces = [];\r\n    var i, ang;\r\n    var r = .9 * k;\r\n    var y = 1 - r * Math.sqrt( 4 * Math.sin(Math.PI / 5) * Math.sin(Math.PI / 5) - 1 );\r\n\r\n    for ( i=0 ; i<5 ; i++ ) {\r\n        ang = i * 2 * Math.PI / 5;\r\n        vertices.push( [r * Math.cos( ang ), y, r * Math.sin( ang )] );\r\n        if (i < 4) {\r\n            faces.push( [0, i + 2, i + 1] );\r\n        } else {\r\n            faces.push( [0, 1, 5] );\r\n        }\r\n    }\r\n\r\n    for ( i=0 ; i<5 ; i++ ) {\r\n        ang = Math.PI / 5 + i * 2 * Math.PI / 5;\r\n        vertices.push( [r * Math.cos( ang ), -y, r * Math.sin( ang )] );\r\n        if (i < 4) {\r\n            faces.push( [11, i + 6, i + 7] );\r\n        } else {\r\n            faces.push( [11, 10, 6] );\r\n        }\r\n    }\r\n    vertices.push( [0,-k,0] );\r\n\r\n    return {\r\n        vertices: vertices,\r\n        faces: faces\r\n    };\r\n};\r\n\r\n\r\n/**\r\n * @return void\r\n */\r\nSolide.prototype.createSolid = function(nbFaces) {\r\n    var colors = [\r\n        new THREE.Color( 0xaaffaa ),\r\n        new THREE.Color( 0xffaaaa ),\r\n        new THREE.Color( 0xaaaaff ),\r\n        new THREE.Color( 0xffffaa ),\r\n        new THREE.Color( 0xffaaff ),\r\n        new THREE.Color( 0xaaffff )\r\n    ];\r\n\r\n    var mesh, opt;\r\n    var k = 1 / Math.sqrt(3);\r\n    if (nbFaces == 4) {\r\n        mesh = new THREE.Group();\r\n        opt = this.getTetrahedronGeometry();\r\n        opt.colors = colors;\r\n        mesh.add( this.createMesh( opt ) );\r\n        opt = this.getCubeGeometry();\r\n        opt.solid = false;\r\n        this._blinker = this.createMesh( opt );\r\n        mesh.add( this._blinker );\r\n    }\r\n    else if (nbFaces == 6) {\r\n        mesh = new THREE.Group();\r\n        opt = this.getCubeGeometry();\r\n        opt.colors = colors;\r\n        mesh.add( this.createMesh( opt ) );\r\n    }\r\n    else if (nbFaces == 8) {\r\n        mesh = new THREE.Group();\r\n        opt = this.getDodecahedronGeometry();\r\n        opt.colors = colors;\r\n        opt.nbColors = 4;\r\n        mesh.add( this.createMesh( opt ) );\r\n        opt = this.getCubeGeometry(.59);\r\n        opt.solid = false;\r\n        opt.colors = colors;\r\n        this._blinker = this.createMesh( opt );\r\n        mesh.add( this._blinker );        \r\n    }\r\n    else if (nbFaces == '20a') {\r\n        mesh = new THREE.Group();\r\n        opt = this.getIcosahedronGeometryA();\r\n        opt.colors = colors;\r\n        opt.nbColors = 5;\r\n        mesh.add( this.createMesh( opt ) );\r\n    }\r\n    else if (nbFaces == '20b') {\r\n        mesh = new THREE.Group();\r\n        opt = this.getIcosahedronGeometryB();\r\n        opt.colors = colors;\r\n        opt.nbColors = 5;\r\n        mesh.add( this.createMesh( opt ) );\r\n    }\r\n    else if (nbFaces == 20) {\r\n        mesh = new THREE.Group();\r\n        opt = this.getIcosahedronGeometry();\r\n        opt.colors = colors;\r\n        opt.nbColors = 5;\r\n        mesh.add( this.createMesh( opt ) );\r\n    }\r\n\r\n    return mesh;\r\n};\r\n\r\n\r\nSolide.create = function() {\r\n    return new Solide();\r\n};\r\nmodule.exports = Solide;\r\n\r\n }\n"],"names":["addListener","e","l","window","addEventListener","attachEvent","require","modules","id","body","mod","err","Error","console","error","stack","exports","document","parentNode","$data","faces","x","width","height","window","exports","module","config","name","description","author","version","major","minor","revision","date","Date","currentLang","lang","undefined","localStorage","getItem","navigator","language","browserLanguage","substr","toLowerCase","setItem","intl","words","params","txt","newTxt","i","c","lastIdx","pos","dic","k","length","charAt","substring","charCodeAt","window","exports","module","ThreeCanvas","require","Rotator","Dodeca1","options","faces","width","height","this","_params1","_params2","call","addClass","grp","THREE","Group","add","createPentagon","addChildren","camera","position","z","scene","root","_rotator","light","HemisphereLight","light1","DirectionalLight","light2","set","start","css","prototype","Object","create","constructor","onRender","time","delta","rotate","threshold","pentagons2","Ta","Tb","Tc","Td","step","console","info","_lastStep","forEach","param","a","Math","random","b","pentagons","pentagon","idx","ang1","ang2","t","p1","p2","endA","endB","endC","endD","rotation","y","pentagon2","_step","radius","angle","i","vertices","face","PI","push","cos","sin","createMesh","doublesided","createPentagon2","material","dx","dy","parent","x","container","grp2","R","X","Y","opt","window","exports","module","Rotator","obj","sx","sy","sz","Math","random","this","prototype","rotate","time","rotation","x","y","create","window","exports","module","animate","time","registeredAnimations","length","forEach","item","render","requestAnimationFrame","Register","anim","indexOf","push","Unregister","pos","splice","addFace","geometry","vertices","color","faces","THREE","Face3","x","y","z","idx","vertex","k","Vector3","i","face","vertexColors","Widget","require","Canvas","options","call","this","addClass","width","innerWidth","height","innerHeight","W","H","css","scene","Scene","camera","PerspectiveCamera","position","renderer","WebGLRenderer","alpha","setClearColor","setSize","append","domElement","_time","prototype","Object","create","constructor","onRender","delta","start","stop","createAxis","grp","Group","add","createLine","opt","linewidth","mat","LineBasicMaterial","geo","Geometry","Line","createMesh","Error","colors","Color","Math","random","nbColors","solid","wireframe","wirecolor","wirewidth","doublesided","MeshPhongMaterial","specular","shininess","metal","VertexColors","side","DoubleSide","FrontSide","transparent","opacity","idxFace","computeFaceNormals","computeVertexNormals","Mesh","cache","line","key","a","b","tmp","type","Lines","console","info","window","exports","module","Widget","options","this","__data","e","innerHTML","childNodes","element","tag","id","document","getElementById","Error","createElement","addClass","ex","console","error","JSON","stringify","prototype","v","undefined","_element","querySelector","data","k","detach","p","parentNode","removeChild","addEvent","name","slot","sender","key","x","f","call","addEventListener","evt","preventDefault","stopPropagation","removeAttr","i","arg","arguments","length","removeAttribute","hasAttribute","attr","val","ns","getAttribute","className","setAttributeNS","setAttribute","text","css","style","insertAfter","target","insertBefore","nextSibling","append","createTextNode","Array","isArray","forEach","item","appendChild","appendTo","parent","onAppend","appendToBody","body","hasClass","classList","contains","trim","add","removeClass","remove","toggleClass","toggle","clear","firstChild","child","nodeType","nodeValue","html","focus","rect","getBoundingClientRect","Tap","_Tap","that","activatePointerEvents","_pointerEvents","start","pe","touch","Date","now","tap","delta","div","isInDOM","create","args","find","query","svg","attribs","namespace","createElementNS","w","version","viewBox","width","height","fromTextOrHtml","txt","span","substr","testElement","createMethod","method","original","DOMTokenList","token","len","_toggle","force","classListProp","protoProp","elemCtrProto","Element","objCtr","Object","strTrim","String","rx","RegExp","replace","arrIndexOf","indexOf","DOMEx","type","message","code","DOMException","checkTokenAndGetIndex","test","ClassList","elem","trimmedClasses","classes","split","push","_updateClassName","toString","classListProto","classListGetter","tokens","l","updated","index","splice","result","join","defineProperty","classListPropDesc","get","enumerable","configurable","number","__defineGetter__","window","exports","module","id","modName","args","dst","document","getElementById","require","src","element","$ctrl","setAttribute","parentNode","replaceChild","window","exports","module","ThreeCanvas","require","Rotator","Solide","options","faces","width","height","call","this","addClass","camera","position","z","light","THREE","HemisphereLight","light1","DirectionalLight","light2","set","cube","createSolid","scene","add","_rotator","start","prototype","Object","create","constructor","onRender","time","delta","rotate","_blinker","opacity","Math","cos","PI","min","visible","children","forEach","line","material","getTetrahedronGeometry","radius","k","sqrt","vertices","getCubeGeometry","getDodecahedronGeometry","getIcosahedronGeometryA","i","ang","r","y","push","sin","getIcosahedronGeometryB","nbFaces","mesh","opt","colors","Color","Group","createMesh","solid","nbColors","getIcosahedronGeometry"],"mappings":"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"}
=======
{"version":3,"file":"articles/solides_platon/@solides_platon.js.map","sources":["articles/solides_platon/@solides_platon.js","$.js","platon.dodeca1.js","three.rotator.js","three.canvas.js","wdg.js","x-widget.js","platon.solide.js"],"sourcesContent":["var require = function() {\n    var modules = {};\n    \n    return function(id, body) {\n        var mod;\n        body = window[\"#\" + id];\n        if (typeof body === 'undefined') {\n            var err = new Error(\"Required module is missing: \" + id);   \n            console.error(err.stack);\n            throw err;\n        }\n        mod = modules[id];\n        if (typeof mod === 'undefined') {\n            mod = {exports: {}};\n            var exports = mod.exports;\n            body(exports, mod);\n            modules[id] = mod.exports;\n            mod = mod.exports;\n            //console.log(\"Module initialized: \" + id);\n        }\n        return mod;\n    };\n}();\nfunction addListener(e,l) {\n    if (window.addEventListener) {\n        window.addEventListener(e,l,false);\n    } else {\n        window.attachEvent('on' + e, l);\n    }\n};\n\naddListener(\n    'DOMContentLoaded',\n    function() {\n        document.body.parentNode.$data = {};\n        // Attach controllers.\n        try{require('x-widget')('platon.solide46','platon.solide',{faces: 6})}catch(x){console.error('Unable to initialize platon.solide!', x)}\ntry{require('x-widget')('platon.solide47','platon.solide',{faces: 4})}catch(x){console.error('Unable to initialize platon.solide!', x)}\ntry{require('x-widget')('platon.solide48','platon.solide',{faces: 8})}catch(x){console.error('Unable to initialize platon.solide!', x)}\ntry{require('x-widget')('platon.dodeca149','platon.dodeca1',{})}catch(x){console.error('Unable to initialize platon.dodeca1!', x)}\ntry{require('x-widget')('platon.solide50','platon.solide',{faces: \"20a\"})}catch(x){console.error('Unable to initialize platon.solide!', x)}\ntry{require('x-widget')('platon.solide51','platon.solide',{faces: \"20b\"})}catch(x){console.error('Unable to initialize platon.solide!', x)}\n    }\n);\n","window['#$']=function(exports,module){  exports.config={\n    name:\"grenier\",\n    description:\"Articles concernant majoritairement l'algorithmie\",\n    author:\"Tolokoban\",\n    version:\"1.0.515\",\n    major:1,\n    minor:0,\n    revision:515,\n    date:new Date(2016,1,4,18,34,34)\n};\nvar currentLang = null;\nexports.lang = function(lang) {\n    if (lang === undefined) {\n        lang = window.localStorage.getItem(\"Language\");\n        if (!lang) {\n            lang = window.navigator.language;\n            if (!lang) {\n                lang = window.navigator.browserLanguage;\n                if (!lang) {\n                    lang = \"fr\";\n                }\n            }\n        }\n        lang = lang.substr(0, 2).toLowerCase();\n    }\n    currentLang = lang;\n    window.localStorage.setItem(\"Language\", lang);\n    return lang;\n};\nexports.intl = function(words, params) {\n    var dic = words[exports.lang()],\n    k = params[0],\n    txt, newTxt, i, c, lastIdx, pos;\n    if (!dic) {\n        //console.error(\"Missing internationalization for language : \\\"\" + exports.lang() + \"\\\"!\");\n        return k;\n    }\n    txt = dic[k];\n    if (!txt) {\n        //console.error(\"Missing internationalization [\" + exports.lang() + \"]: \\\"\" + k + \"\\\"!\");\n        return k;\n    }\n    if (params.length > 1) {\n        newTxt = \"\";\n        lastIdx = 0;\n        for (i = 0 ; i < txt.length ; i++) {\n            c = txt.charAt(i);\n            if (c === '$') {\n                newTxt += txt.substring(lastIdx, i);\n                i++;\n                pos = txt.charCodeAt(i) - 48;\n                if (pos < 0 || pos >= params.length) {\n                    newTxt += \"$\" + txt.charAt(i);\n                } else {\n                    newTxt += params[pos];\n                }\n                lastIdx = i + 1;\n            } else if (c === '\\\\') {\n                newTxt += txt.substring(lastIdx, i);\n                i++;\n                newTxt += txt.charAt(i);\n                lastIdx = i + 1;\n            }\n        }\n        newTxt += txt.substr(lastIdx);\n        txt = newTxt;\n    }\n    return txt;\n};\n }\n","window['#platon.dodeca1']=function(exports,module){  \"use strict\";\nvar TreeCanvas = require(\"three.canvas\");\nvar Rotator = require(\"three.rotator\");\n\n\n/**\n * @example\n * var Dodeca1 = require(\"platon.dodeca1\");\n * var instance = new Dodeca1(opt);\n * @class Dodeca1\n */\nvar Dodeca1 = function(options) {\n    if (typeof options === 'undefined') options = {};\n    if (typeof options.faces === 'undefined') options.faces = 4;\n    if (typeof options.width === 'undefined') options.width = 280;\n    if (typeof options.height === 'undefined') options.height = 280;\n\n    TreeCanvas.call(this, {width: options.width, height: options.height});\n    this.addClass(\"platon-dodeca1\");\n\n    var grp = new THREE.Group();\n\n    grp.add( this.createPentagon() );\n    this.addChildren( grp );\n\n    this.camera.position.z = 7;\n\n    this.scene.add( grp );\n    this._rotator = new Rotator(grp);\n\n    var light = new THREE.HemisphereLight( 0xcceeff, 0x990000, 3.6 ); // soft white light\n    var light1 = new THREE.DirectionalLight( 0x997777, 5 );\n    var light2 = new THREE.DirectionalLight( 0x777799, 2 );\n    light1.position.set(43,13,5);\n    light2.position.set(-20,5,1);\n\n    this.scene.add( light1 );\n    this.scene.add( light2 );\n    this.scene.add( light );\n\n    this.start();\n\n    this.css('float', 'right');\n};\n\n// Extension of Widget.\nDodeca1.prototype = Object.create(TreeCanvas.prototype);\nDodeca1.prototype.constructor = Dodeca1;\n\n/**\n * @return void\n */\nDodeca1.prototype.onRender = function(time, delta) {\n    this._rotator.rotate( time );\n\n    this.pentagons.forEach(function (pentagon, idx) {\n        var t = time + 500 * idx;\n        var threshold = 1.095;\n        var bound = .25;\n        var alpha = Math.cos(t / 3600);\n        if (alpha > bound) {\n            alpha = threshold;\n        }\n        else if (alpha < -bound) {\n            alpha = -threshold;\n        }\n        else {\n            alpha = threshold * alpha / bound;\n        }\n        pentagon.rotation.y = alpha;\n    });\n\n    \n};\n\n\n/**\n * @return void\n */\nDodeca1.prototype.createPentagon = function(radius) {\n    if (typeof radius === 'undefined') radius = 1;\n\n    var vertices = [];\n    var face = [];\n    var angle;\n    var i;\n    for( i=0 ; i<5 ; i++ ) {\n        angle = i * 2 * Math.PI / 5;\n        vertices.push([\n            radius * Math.cos( angle ),\n            radius * Math.sin( angle ),\n            0\n        ]);\n        face.push( i );\n    }\n    return this.createMesh({\n        vertices: vertices,\n        faces: [face],\n        doublesided: true\n    });\n};\n\n\nDodeca1.prototype.createPentagon2 = function(radius) {\n    if (typeof radius === 'undefined') radius = 1;\n\n    var angle = 4 * Math.PI / 5;\n    var dx = radius * Math.cos( angle );\n    var dy = radius * Math.sin( angle );\n    var vertices = [];\n    var face = [];\n    var i;\n    for( i=0 ; i<5 ; i++ ) {\n        angle = i * 2 * Math.PI / 5;\n        vertices.push([\n            radius * Math.cos( angle ) - dx,\n            radius * Math.sin( angle ) - dy,\n            0\n        ]);\n        face.push( i );\n    }\n    return this.createMesh({\n        vertices: vertices,\n        faces: [face],\n        doublesided: true\n    });\n};\n\n/**\n * @return void\n */\nDodeca1.prototype.addChildren = function(parent, radius) {\n    if (typeof radius === 'undefined') radius = 1;\n\n    var angle;\n    var x;\n    var y;\n    var pentagons = [];\n    var pentagon;\n    var grp;\n    var i;\n    for( i=0 ; i<5 ; i++ ) {\n        angle = i * 2 * Math.PI / 5;\n        x = radius * Math.cos( angle );\n        y = radius * Math.sin( angle );\n        pentagon = this.createPentagon2( radius );\n        pentagons.push( pentagon );\n        grp = new THREE.Group();\n        grp.add( pentagon );\n        grp.position.x = x;\n        grp.position.y = y;\n        grp.rotation.z = angle - 0.2 * Math.PI;\n        parent.add( grp );\n    }\n    this.pentagons = pentagons;\n};\n\n\nDodeca1.create = function(opt) {\n    return new Dodeca1(opt);\n};\nmodule.exports = Dodeca1;\n }\n","window['#three.rotator']=function(exports,module){  /**\n * @example\n * var Rotator = require(\"three.rotator\");\n * var instance = new Rotator();\n * @class Rotator\n */\nvar Rotator = function(obj, sx, sy, sz) {\n    if (typeof sx === 'undefined') sx = 2500 + Math.random() * 500;\n    if (typeof sy === 'undefined') sy = 2500 + Math.random() * 500;\n    if (typeof sz === 'undefined') sz = 2500 + Math.random() * 500;\n\n    this.obj = obj;\n    this.sx = sx;\n    this.sy = sy;\n    this.sz = sz;\n};\n\n/**\n * @return void\n */\nRotator.prototype.rotate = function(time, obj) {\n    if (typeof obj === 'undefined') obj = this.obj;\n\n    obj.rotation.x = time / this.sx;\n    obj.rotation.y = time / this.sy;\n    obj.rotation.y = time / this.sz;   \n};\n\nRotator.create = function() {\n    return new Rotator();\n};\nmodule.exports = Rotator;\n }\n","window['#three.canvas']=function(exports,module){  \"use strict\";\nvar Widget = require(\"wdg\");\n\nvar registeredAnimations = [];\n\nfunction animate(time) {\n    if (registeredAnimations.length > 0) {\n        registeredAnimations.forEach(function (item) {\n            item.render( time );\n        });\n        window.requestAnimationFrame( animate );\n    }\n}\n\nfunction Register(anim) {\n    if (registeredAnimations.indexOf(anim) == -1) {\n        registeredAnimations.push(anim);\n        if (registeredAnimations.length == 1) {\n            window.requestAnimationFrame( animate );\n        }\n    }\n}\n\nfunction Unregister(anim) {\n    var pos = registeredAnimations.indexOf(anim);\n    if (pos > -1) {\n        registeredAnimations.splice(pos, 1);\n    }\n}\n\n/**\n * @example\n * var Canvas = require(\"three.canvas\");\n * var options = {\n *    width: 640,\n *    height: 480\n * };\n * var instance = new Canvas(options);\n * @class Canvas\n */\nvar Canvas = function(options) {\n    Widget.call(this);\n    this.addClass(\"three-canvas\");\n\n    if (typeof options === 'undefined') options = {};\n    if (typeof options.width === 'undefined') options.width = window.innerWidth;\n    if (typeof options.height === 'undefined') options.height = window.innerHeight;\n\n    this.W = options.width;\n    this.H = options.height;\n    this.css({\n        width: this.W + \"px\",\n        height: this.H + \"px\"\n    });\n    this.scene = new THREE.Scene();\n    this.camera = new THREE.PerspectiveCamera( 45, this.W / this.H, 0.1, 1000 );\n    this.camera.position.z = 1.4;\n    this.renderer = new THREE.WebGLRenderer({ alpha: true });\n    this.renderer.setClearColor( 0xffffff, 0);\n    this.renderer.setSize( this.W, this.H );\n    this.append( this.renderer.domElement );\n    this._time = 0;\n};\n\n// Extension of Widget.\nCanvas.prototype = Object.create(Widget.prototype);\nCanvas.prototype.constructor = Canvas;\n\n/**\n * @return void\n */\nCanvas.prototype.render = function(time) {\n    if (this._time <= 0) this._time = time - 1;\n    this.onRender(time, time - this._time);\n    this.renderer.render( this.scene, this.camera );\n    this._time = time;\n};\n\n/**\n * @return void\n */\nCanvas.prototype.onRender = function(time, delta) {};\n\n/**\n * @return void\n */\nCanvas.prototype.start = function() {\n    Register(this);\n};\n\n/**\n * @return void\n */\nCanvas.prototype.stop = function() {\n    Unregister(this);\n};\n\n\n/**\n * @return void\n */\nCanvas.prototype.createMesh = function(opt) {\n    if (typeof opt === 'undefined') throw Error(\"[three.canvas.createMesh] Missing optument!\");\n    if (typeof opt.colors === 'undefined') opt.colors = [\n        new THREE.Color( .5 + Math.random() * .5, .5 + Math.random() * .5, .5 + Math.random() * .5 )\n    ];\n    if (typeof opt.nbColors === 'undefined') opt.nbColors = opt.colors.length;\n    if (typeof opt.solid === 'undefined') opt.solid = true;\n    if (typeof opt.wireframe === 'undefined') opt.wireframe = true;\n    if (typeof opt.wirecolor === 'undefined') opt.wirecolor = new THREE.Color( 0x333333 );\n    if (typeof opt.wirewidth === 'undefined') opt.wirewidth = 2;\n    if (typeof opt.doublesided === 'undefined') opt.doublesided = false;\n\n    if (typeof opt.mat === 'undefined') opt.mat = new THREE.MeshPhongMaterial({\n        specular: 0x333333,\n        shininess: 3.14,\n        metal: true,\n        vertexColors: THREE.VertexColors,\n        side: opt.doublesided ? THREE.DoubleSide : THREE.FrontSide,\n        transparent: true,\n        opacity: .9\n    });;\n\n    var grp = new THREE.Group();\n\n    if (opt.solid) {\n        var geo = new THREE.Geometry();\n        opt.vertices.forEach(function (vertex) {\n            geo.vertices.push( new THREE.Vector3( vertex[0], vertex[1], vertex[2] ) );\n        });\n        opt.faces.forEach(function (face, idxFace) {\n            addFace( geo, face, opt.colors[idxFace % opt.nbColors] );\n        });\n        geo.computeFaceNormals ();\n        geo.computeVertexNormals ();\n        grp.add( new THREE.Mesh( geo, opt.mat ) );\n    }\n\n    if (opt.wireframe) {\n        var mat = new THREE.LineBasicMaterial({ color: opt.wirecolor, linewidth: opt.wirewidth });\n        var cache = [];\n        opt.faces.forEach(function (face) {\n            var line;\n            var key, a, b, tmp;\n            for( var i=0 ; i<face.length ; i++ ) {\n                a = face[i];\n                b = face[(i + 1) % face.length];\n                if (b < a) {\n                    tmp = a;\n                    a = b;\n                    b = tmp;\n                }\n                key = a + \",\" + b;\n                if (cache.indexOf( key ) == -1) {\n                    cache.push( key );\n                    line = new THREE.Geometry();\n                    line.vertices.push(\n                        new THREE.Vector3( \n                            opt.vertices[a][0], opt.vertices[a][1], opt.vertices[a][2] ),\n                        new THREE.Vector3( \n                            opt.vertices[b][0], opt.vertices[b][1], opt.vertices[b][2] )\n                    );\n                    line.type = THREE.Lines;\n                    grp.add( new THREE.Line( line, mat ) );\n                }\n            }\n        });\n    }\n\nconsole.info(\"[three.canvas] grp=\", grp);\n    return grp;\n};\n\n\nfunction addFace(geometry, vertices, color) {\n    var faces = [];\n    if (vertices.length == 3) {\n        faces.push(\n            new THREE.Face3( vertices[0], vertices[1], vertices[2] )\n        );\n    }\n    else if (vertices.length == 4) {\n        faces.push(\n            new THREE.Face3( vertices[0], vertices[1], vertices[2] ),\n            new THREE.Face3( vertices[0], vertices[2], vertices[3] )\n        );\n    }\n    else {\n        // We use the fan method.\n        var x = 0, y = 0, z = 0;\n        vertices.forEach(function (idx) {\n            var vertex = geometry.vertices[vertices[idx]];\n            x += vertex.x;\n            y += vertex.y;\n            z += vertex.z;\n        });\n        x /= vertices.length;\n        y /= vertices.length;\n        z /= vertices.length;\n\n        var k = vertices.length;\n        geometry.vertices.push( new THREE.Vector3( x, y, z ) );\n\n        var i;\n        for( i=0 ; i<k ; i++ ) {\n            faces.push( new THREE.Face3( i, (i + 1) % k, k ) );\n        }\n    }\n\n    if (typeof color !== 'undefined') {\n        // Apply a color to this face.\n        faces.forEach(function (face) {\n            face.vertexColors[0] = face.vertexColors[1] = face.vertexColors[2] = color;\n        });\n    }\n\n    faces.forEach(function (face) {\n        geometry.faces.push(face);\n    });\n}\n\n\nCanvas.create = function(options) {\n    return new Canvas(options);\n};\nmodule.exports = Canvas;\n }\n","window['#wdg']=function(exports,module){  'use strict';\n\n/**\n * Widgets inherit this class.\n */\nfunction Widget(options) {\n    this.__data = {};\n    try {\n        var e;\n        if (typeof options === 'undefined') options = {};\n        if (typeof options.innerHTML !== 'undefined' && typeof options.childNodes !== 'undefined') {\n            // On passe directement un élément.\n            options = {element: options};\n        }\n        if (typeof options.tag === 'undefined') options.tag = \"div\";\n        if (options.element) {\n            this.element(options.element);\n        } else if (typeof options.id !== 'undefined') {\n            e = window.document.getElementById(options.id);\n            if (!e) {\n                throw Error(\"Can't find element with id: \\\"\" + options.id + \"\\\"!\");\n            }\n            this.element(e);\n        } else {\n            this.element(window.document.createElement(options.tag));\n            this.addClass(\"wdg\", \"custom\");\n        }\n    }\n    catch (ex) {\n        console.error(\"[widget] \", ex);\n        console.error(\"[Widget] \", JSON.stringify(options));\n        throw Error(ex);\n    }\n}\n\nWidget.prototype = {\n    /**\n     * Accessor for attribute element\n     * @return element\n     */\n    element: function(v) {\n        if (v === undefined) return this._element;\n        if (typeof v === 'string') {\n            v = window.document.querySelector(v);\n        }\n        this._element = v;\n        return this;\n    },\n\n    data: function(k, v) {\n        if (typeof v === 'undefined') {\n            return this.__data[k];\n        }\n        this.__data[k] = v;\n        return this;\n    },\n\n    /**\n     * @description\n     * Remove this element from its parent.\n     * @memberof wdg\n     */\n    detach: function() {\n        var e = this._element;\n        if (e) {\n            var p = e.parentNode;\n            if (p) {\n                p.removeChild(e);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     *\n     * @param name\n     * @memberof wdg\n     */\n    addEvent: function(name, slot, sender) {\n        if (typeof slot === 'string') {\n            var that = this, key = slot;\n            if (typeof sender === 'undefined') sender = this;\n            slot = function(x) {\n                var f = sender[key];\n                if (typeof f === 'function') {\n                    f.call(sender, x);\n                } else {\n                    throw Error(\"\\\"\" + slot + \"\\\" is not a function of: \" + sender);\n                }\n            };\n        }\n        var e = this.element();\n        if (name == 'tap') {\n            e.addEventListener(\n                \"mousedown\",\n                function(evt) {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                },\n                false\n            );\n            e.addEventListener(\n                \"mouseup\",\n                function(evt) {\n                    evt.preventDefault();\n                    evt.stopPropagation();\n                    slot(evt);\n                },\n                false\n            );\n            e.addEventListener(\"touchend\", slot, false);\n\n        } else {\n            e.addEventListener(name, slot, false);\n        }\n        return this;\n    },\n\n    /**\n     * Retire un attribut à l'élément sous-jacent.\n     * @example\n     * this.removeAttr(\"selected\");\n     * @memberof wdg\n     */\n    removeAttr: function() {\n        if (this._element) {\n            var i, arg;\n            for (i = 0 ; i < arguments.length ; i++) {\n                arg = arguments[i];\n                this._element.removeAttribute(arg);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * Teste l'existence d'un attribut dans l'élément sous-jacent.\n     * @memberof wdg\n     */\n    hasAttribute: function(key) {\n        if (!this._element) return false;\n        return this._element.hasAttribute(key);\n    },\n\n    /**\n     * Lit ou affecte la valeur d'un attribut de l'élément sous-jacent.\n     * @example\n     * // Le pseudo attribut '$' sert à insérer du texte.\n     * var div = new Widget();\n     * div.attr({$: 'Hello world!', title: 'Typical first sentence...'});\n     * @param key Nom de l'attribut ou dictionnaire des attributs.\n     * @param val [Facultatif] Valeur de l'attribut. Si elle est omise, la méthode retourne la valeur actuelle.\n     * @param ns [Facultatif] Namespace éventuel.\n     * @memberof wdg\n     */\n    attr: function(key, val, ns) {\n        var k;\n        if (!this._element || !this._element.getAttribute) return null;\n        if (typeof key == \"string\") {\n            if (val !== undefined) {\n                if (key == \"class\") {\n                    this._element.className = val;\n                    return this;\n                }\n                if (ns && this._element.setAttributeNS) {\n                    this._element.setAttributeNS(ns, key, val);\n                }\n                else {\n                    this._element.setAttribute(key, val);\n                }\n                return this;\n            }\n            return this._element.getAttribute(key);\n        }\n        if (typeof key == \"object\") {\n            for (k in key) {\n                if (k == \"class\") {\n                    this._element.className = key[k];\n                } else if (k == \"$\") {\n                    this.text(key[k]);\n                } else {\n                    this._element.setAttribute(k, key[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n\n    /**\n     * Permet de changer le style de l'élément sous-jacent.\n     * @example\n     * this.css(\"color\", \"red\");\n     * alert(this.css(\"display\"));\n     * this.css(\n     *   {\n     *     margin: \"0px\",\n     *     padding: \"3px\",\n     *     border: \"1px solid black\"\n     *   }\n     * );\n     * @param key Nom du champ de style ou dictionnaire clefs/valeurs.\n     * @param val  Valeur du champ key.  S'il est omis et  que \"key\"\n     * est  de type  string,  alors la  méthode  retourne la  valeur\n     * actuelle.\n     * @memberof wdg\n     */\n    css: function(key, val) {\n        var k, e = this._element;\n        if (!e) return null;\n        if (typeof e.style !== 'object') {\n            console.error(\"[wdg.css] This element does not support styles!\", e);\n            e.style = {};\n        }\n        if (typeof key == 'string') {\n            if (val) {\n                e.style[key] = val;\n                return this;\n            }\n            return e.style[key];\n        }\n        if (typeof key == 'object') {\n            for (k in key) {\n                try {\n                    e.style[k] = key[k];\n                } catch (x) {\n                    console.error(\"[wdg.css] Bad CSS attribute \" + k + \": \" + key[k]);\n                }\n            }\n        }\n        return this;\n    },\n\n    insertAfter: function(target) {\n        if (typeof target.element === 'function') {\n            target = target.element();\n        }\n        target.parentNode.insertBefore(this.element(), target.nextSibling);\n        return this;\n    },\n\n    insertBefore: function(target) {\n        if (typeof target.element === 'function') {\n            target = target.element();\n        }\n        target.parentNode.insertBefore(this.element(), target);\n        return this;\n    },\n\n    /**\n     * Append children to this widget.\n     */\n    append: function() {\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (typeof arg === 'number') arg = \"\" + arg;\n            if (typeof arg === 'undefined' || (typeof arg !== 'object' && typeof arg !== 'string')) {\n                console.error(\"[Widget.append] Argument #\" + i + \" is invalid!\", arguments);\n                console.error(\"[Widget.append] Is type is: \" + (typeof arg));\n                continue;\n            };\n            if (typeof arg === 'string') {\n                if (arg.length < 1) arg = \" \";\n                arg = window.document.createTextNode(arg);\n                if (!arg) {\n                    console.error(\n                        \"[Widget.append] Unable to create a text node with this text: \", arg\n                    );\n                    console.error(\"[wdg] arguments=...\", arguments);\n                    throw Error(\n                        \"[Widget.append] Unable to create a text node with this text: \"\n                            + JSON.stringify(arg)\n                    );\n                }\n            }\n            if (Array.isArray(arg)) {\n                arg.forEach(\n                    function(item) {\n                        this.append(item);\n                    }, this\n                );\n            } else {\n                var e = typeof arg.element === 'function' ? arg.element() : arg;\n                this._element.appendChild(e);\n                /*\n                 if (typeof arg.onAppend === 'function') {\n                 arg.onAppend.call(arg);\n                 }\n                 */\n            }\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Append this widget to a parent.\n     * @param parent\n     * @memberof wdg\n     */\n    appendTo: function(parent) {\n        if (!parent) return this;\n        if (typeof parent.append === 'function') {\n            parent.append(this);\n        } else if (typeof parent.appendChild === 'function') {\n            parent.appendChild(this._element);\n            this.onAppend();\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Append this widget to BODY.\n     * @memberof wdg\n     */\n    appendToBody: function() {\n        window.document.body.appendChild(this._element);\n        return this;\n    },\n\n    hasClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (!e.contains(arg)) return false;\n        }\n        return true;\n    },\n\n    /**\n     * @description\n     * Add CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    addClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            if (typeof arg === 'string') {\n                arg = arg.trim();\n                if (arg.length > 0) e.add(arg);\n            } else {\n                console.error(\"[wdg.addClass] Arguments with bad type!\", arguments);\n            }\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Remove CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    removeClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            e.remove(arg);\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Toggle CSS classe(s) to this widget.\n     * @memberof wdg\n     */\n    toggleClass: function() {\n        var e = this._element.classList;\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            e.toggle(arg);\n        }\n        return this;\n    },\n\n    /**\n     * Remove all children of this widget.\n     * Any argument passed will be appended to this widget.\n     * @memberof wdg\n     */\n    clear: function() {\n        // (!) On préfère retirer les éléments un par un du DOM plutôt que d'utiliser simplement\n        // this.html(\"\").\n        // En effet, le code simplifié a des conséquences inattendues dans IE9 et IE10 au moins.\n        // Le bug des markers qui disparaissaients sur les cartes de Trail-Passion 4 a été corrigé\n        // avec cette modification.\n        var e = this.element();\n        while(e.firstChild){\n            e.removeChild(e.firstChild);\n        }\n        var i, arg;\n        for (i = 0 ; i < arguments.length ; i++) {\n            arg = arguments[i];\n            this.append(arg);\n        }\n\n        return this;\n    },\n\n    /**\n     * 1) Sans argument, cette  fonction retourne le texte contenu\n     * dans ce widget.\n     * 2) Avec  un texte en  argument, cette fonction  retire tous\n     * les  enfants de  ce widget  et  les remplace  par un  noeud\n     * texte.\n     * 3)  Avec un  élément  du DOM  en  argument, cette  fonction\n     * retourne le texte contenu par ce dernier.\n     * @memberof tfw.Widget\n     */\n    text: function(arg) {\n        var e, text, i, child;\n        if (typeof arg == 'string' || typeof arg == 'number') {\n            this.clear();\n            this._element.appendChild(window.document.createTextNode(arg));\n            return this;\n        } else {\n            // On retourne le contenu textuel de ce widget.\n            e = this._element;\n            if (arg !== undefined) {\n                // On peut passer un élément du DOM pour en extraire son contenu textuel.\n                e = arg;\n            }\n            text = \"\";\n            if (e.childNodes) {\n                for (i=0 ; i<e.childNodes.length ; i++) {\n                    child = e.childNodes[i];\n                    if (child.nodeType == 3) {\n                        if (child.nodeValue) {\n                            text += child.nodeValue;\n                        }\n                    } else {\n                        text += this.text( child );\n                    }\n                }\n            }\n            return text;\n        }\n    },\n\n    /**\n     * @description\n     *\n     * @param html\n     * @memberof wdg\n     */\n    html: function(html) {\n        if (typeof html === 'undefined') return this._element.innerHTML;\n        if (this._element) this._element.innerHTML = html;\n        return this;\n    },\n\n    /**\n     * @description\n     * If applicable, give focus to this element.\n     * @memberof wdg\n     */\n    focus: function() {\n        var e = this._element;\n        if (!e) return this;\n        if (typeof e.focus === 'function') {\n            e.focus();\n        }\n        return this;\n    },\n\n    /**\n     * @description\n     * Returns the bounds of the underlying element.\n     * @memberof wdg\n     */\n    rect: function() {\n        var e = this._element;\n        if (!e) return null;\n        return e.getBoundingClientRect();\n    },\n\n    /**\n     * @description\n     *\n     * @param\n     * @memberof wdg\n     */\n    Tap: function(slot, sender) {\n        if (typeof slot === 'undefined') return this._Tap;\n        var that = this;\n        if (typeof sender === 'undefined') sender = that;\n        if (typeof slot === 'string') slot = sender[slot];\n        if (!this._Tap) {\n            this.activatePointerEvents();\n        }\n        this._Tap = [slot, sender];\n        return this;\n    }\n};\n\n/**\n * @return void\n */\nWidget.prototype.activatePointerEvents = function() {\n    if (this._pointerEvents) return this;\n    this._pointerEvents = {start: 0};\n\n    /*\n     interact(this.element()).on(\"tap\", function(evt) {\n     var slot = that._Tap;\n     if (slot) {\n     slot[0].call(slot[1], {x: evt.x, y: evt.y});\n     }\n     });\n     return this;\n     */\n    var pe = this._pointerEvents;\n    var that = this;\n    this.addEvent(\n        \"touchstart\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            pe.touch = 1;\n            pe.start = Date.now();\n        }\n    );\n    this.addEvent(\n        \"touchend\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            var tap = that._Tap;\n            if (!tap) return;\n            pe.touch = 0;\n            var delta = Date.now() - pe.start;\n            if (delta > 50) {\n                tap[0].call(tap[1], evt);\n            }\n        }\n    );\n    this.addEvent(\n        \"mousedown\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            if (pe.touch) return;\n            pe.start = Date.now();\n        }\n    );\n    this.addEvent(\n        \"mouseup\",\n        function(evt) {\n            evt.preventDefault();\n            evt.stopPropagation();\n            var tap = that._Tap;\n            if (!tap) return;\n            var delta = Date.now() - pe.start;\n            if (delta > 50) {\n                tap[0].call(tap[1], evt);\n            }\n        }\n    );\n\n    return this;\n};\n\n/**\n * @return void\n */\nWidget.prototype.div = function() {\n    var div = new Widget();\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.prototype.tag = function(tag) {\n    if (typeof tag === 'undefined') tag = 'div';\n    var div = new Widget({tag: tag});\n    for (var i = 1 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\n/**\n * @return void\n */\nWidget.prototype.isInDOM = function() {\n    return Widget.isInDOM(this.element());\n};\n\n/**\n * Fonction à surcharger  si on veut réagir lors de  l'insertion dans le\n * DOM.\n */\nWidget.prototype.onAppend = function() {};\n\nWidget.create = function(args) {\n    return new Widget(args);\n};\n\nWidget.find = function(query) {\n    return new Widget({element: window.document.querySelector(query)});\n};\n\n\n/**\n * Create a SVG élément with attributes.\n */\nWidget.svg = function(tag, attribs) {\n    var namespace = \"http://www.w3.org/2000/svg\";\n    if (typeof tag === 'object') {\n        attribs = tag;\n        tag = \"svg\";\n    }\n    if (typeof tag !== 'string') tag = 'svg';\n    var e = window.document.createElementNS(namespace, tag);\n    var w = new Widget({element: e});\n    if (typeof attribs === 'undefined') attribs = {};\n    if (tag == 'svg') {\n        if (typeof attribs.version === 'undefined') attribs.version = \"1.1\";\n        if (typeof attribs['xmlns:svg'] === 'undefined') {\n            attribs['xmlns:svg'] = 'http://www.w3.org/2000/svg';\n        }\n        if (typeof attribs['xmlns'] === 'undefined') {\n            attribs['xmlns'] = 'http://www.w3.org/2000/svg';\n        }\n        if (typeof attribs['xmlns:xlink'] === 'undefined') {\n            attribs['xmlns:xlink'] = 'http://www.w3.org/1999/xlink';\n        }\n        if (typeof attribs.viewBox === 'undefined'\n            && typeof attribs.width === 'number'\n            && typeof attribs.height === 'number')\n        {\n            attribs.viewBox = \"0 0 \" + attribs.width + \" \" + attribs.height;\n        }\n    }\n    if (typeof attribs === 'object') {\n        w.attr(attribs);\n    }\n    return w;\n};\n\n/**\n * Tester si le widget ou élément est actuellement attaché au DOM.\n */\nWidget.isInDOM = function(e) {\n    if (!e) return false;\n    if (typeof e.element === 'function') {\n        e = e.element();\n    }\n    if (e === window.document) return true;\n    return Widget.isInDOM(e.parentNode);\n};\n\n/**\n * Create a `span` with a text or an HTML content.\n * If `txt` starts with `<html>`, we set an HTML content.\n */\nWidget.fromTextOrHtml = function(txt) {\n    var e = Widget.span();\n    if (txt.substr(0, 6) == '<html>') {\n        e.html(txt.substr(6));\n    } else {\n        e.text(txt);\n    }\n    return e;\n};\n\n/**\n * Create a DIV and apply all arguments as classes to it.\n */\nWidget.div = function() {\n    var div = new Widget({tag: \"div\"});\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\n/**\n * Create a SPAN and apply all arguments as classes to it.\n */\nWidget.span = function() {\n    var div = new Widget({tag: \"span\"});\n    for (var i = 0 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.tag = function(tag) {\n    if (typeof tag === 'undefined') tag = 'div';\n    var div = new Widget({tag: tag});\n    for (var i = 1 ; i < arguments.length ; i++) {\n        div.addClass(arguments[i]);\n    }\n    return div;\n};\n\nWidget.id = function(id) {\n    return new Widget({element: window.document.getElementById(id)});\n};\n\n/**\n * Widget defining the `document.body` element.\n */\nWidget.body = new Widget(window.document.body);\n\nmodule.exports = Widget;\n\n\n\n/*\n * classList.js: Cross-browser full element.classList implementation.\n * 2014-07-23\n *\n * http://purl.eligrey.com/github/classList.js/blob/master/classList.js\n *\n * By Eli Grey, http://eligrey.com\n * Public Domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */\n\n// Full polyfill for browsers with no classList support\nif (!(\"classList\" in window.document.createElement(\"_\"))) {\n    (function () {\n        \"use strict\";\n\n        if (!('Element' in window)) return;\n\n        var classListProp = \"classList\";\n        var protoProp = \"prototype\";\n        var elemCtrProto = window.Element[protoProp];\n        var objCtr = Object;\n        var strTrim = String.prototype.trim || function () {\n            var rx = new RegExp(\"^\\\\s+|\\\\s+$\", \"g\");\n            return this.replace(rx, '');\n        };\n        var arrIndexOf = Array[protoProp].indexOf || function (item) {\n            var\n            i = 0\n            , len = this.length\n            ;\n            for (; i < len; i++) {\n                if (i in this && this[i] === item) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n        // Vendors: please allow content code to instantiate DOMExceptions\n        , DOMEx = function (type, message) {\n            this.name = type;\n            this.code = DOMException[type];\n            this.message = message;\n        }\n        , checkTokenAndGetIndex = function (classList, token) {\n            if (token === \"\") {\n                throw new DOMEx(\n                    \"SYNTAX_ERR\"\n                    , \"An invalid or illegal string was specified\"\n                );\n            }\n            if ((new RegExp(\"\\\\s\")).test(token)) {\n                throw new DOMEx(\n                    \"INVALID_CHARACTER_ERR\"\n                    , \"String contains an invalid character\"\n                );\n            }\n            return arrIndexOf.call(classList, token);\n        }\n        , ClassList = function (elem) {\n            var\n            trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\n            , classes = trimmedClasses ? trimmedClasses.split(new RegExp(\"\\\\s+\")) : []\n            , i = 0\n            , len = classes.length\n            ;\n            for (; i < len; i++) {\n                this.push(classes[i]);\n            }\n            this._updateClassName = function () {\n                elem.setAttribute(\"class\", this.toString());\n            };\n        }\n        , classListProto = ClassList[protoProp] = []\n        , classListGetter = function () {\n            return new ClassList(this);\n        }\n        ;\n\n        // Most DOMException implementations don't allow calling DOMException's toString()\n        // on non-DOMExceptions. Error's toString() is sufficient here.\n        DOMEx[protoProp] = Error[protoProp];\n        classListProto.item = function (i) {\n            return this[i] || null;\n        };\n        classListProto.contains = function (token) {\n            token += \"\";\n            return checkTokenAndGetIndex(this, token) !== -1;\n        };\n        classListProto.add = function () {\n            var\n            tokens = arguments\n            , i = 0\n            , l = tokens.length\n            , token\n            , updated = false\n            ;\n            do {\n                token = tokens[i] + \"\";\n                if (checkTokenAndGetIndex(this, token) === -1) {\n                    this.push(token);\n                    updated = true;\n                }\n            }\n            while (++i < l);\n\n            if (updated) {\n                this._updateClassName();\n            }\n        };\n        classListProto.remove = function () {\n            var\n            tokens = arguments\n            , i = 0\n            , l = tokens.length\n            , token\n            , updated = false\n            , index\n            ;\n            do {\n                token = tokens[i] + \"\";\n                index = checkTokenAndGetIndex(this, token);\n                while (index !== -1) {\n                    this.splice(index, 1);\n                    updated = true;\n                    index = checkTokenAndGetIndex(this, token);\n                }\n            }\n            while (++i < l);\n\n            if (updated) {\n                this._updateClassName();\n            }\n        };\n        classListProto.toggle = function (token, force) {\n            token += \"\";\n\n            var\n            result = this.contains(token)\n            , method = result ?\n                force !== true && \"remove\"\n                :\n                force !== false && \"add\"\n            ;\n\n            if (method) {\n                this[method](token);\n            }\n\n            if (force === true || force === false) {\n                return force;\n            } else {\n                return !result;\n            }\n        };\n        classListProto.toString = function () {\n            return this.join(\" \");\n        };\n\n        if (objCtr.defineProperty) {\n            var classListPropDesc = {\n                get: classListGetter, enumerable: true, configurable: true\n            };\n            try {\n                objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n            } catch (ex) { // IE 8 doesn't support enumerable:true\n                if (ex.number === -0x7FF5EC54) {\n                    classListPropDesc.enumerable = false;\n                    objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\n                }\n            }\n        } else if (objCtr[protoProp].__defineGetter__) {\n            elemCtrProto.__defineGetter__(classListProp, classListGetter);\n        }\n    }());\n} else {\n    // There is full or partial native classList support, so just check if we need\n    // to normalize the add/remove and toggle APIs.\n    (function () {\n        \"use strict\";\n\n        var testElement = window.document.createElement(\"_\");\n\n        testElement.classList.add(\"c1\", \"c2\");\n\n        // Polyfill for IE 10/11 and Firefox <26, where classList.add and\n        // classList.remove exist but support only one argument at a time.\n        if (!testElement.classList.contains(\"c2\")) {\n            var createMethod = function(method) {\n                var original = DOMTokenList.prototype[method];\n\n                DOMTokenList.prototype[method] = function(token) {\n                    var i, len = arguments.length;\n\n                    for (i = 0; i < len; i++) {\n                        token = arguments[i];\n                        original.call(this, token);\n                    }\n                };\n            };\n            createMethod('add');\n            createMethod('remove');\n        }\n\n        testElement.classList.toggle(\"c3\", false);\n\n        // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\n        // support the second argument.\n        if (testElement.classList.contains(\"c3\")) {\n            var _toggle = DOMTokenList.prototype.toggle;\n\n            DOMTokenList.prototype.toggle = function(token, force) {\n                if (1 in arguments && !this.contains(token) === !force) {\n                    return force;\n                } else {\n                    return _toggle.call(this, token);\n                }\n            };\n\n        }\n        testElement = null;\n    }());\n}\n }\n","window['#x-widget']=function(exports,module){  \"use strict\";\n\n\nmodule.exports = function(id, modName, args) {\n    var dst = document.getElementById(id);\n    if (!dst) {\n        // This widget does not exist!\n        return;\n    }\n    var module = require(modName);\n    var src = new module(args);\n    src.element().$ctrl = src;\n    src = src.element();\n    src.setAttribute('id', id);\n    dst.parentNode.replaceChild(src, dst);\n};\n }\n","window['#platon.solide']=function(exports,module){  \"use strict\";\nvar ThreeCanvas = require(\"three.canvas\");\nvar Rotator = require(\"three.rotator\");\n\n\n/**\n * @example\n * var Solide = require(\"platon.solide\");\n * var instance = new Solide();\n * @class Solide\n */\nvar Solide = function(options) {\n    if (typeof options === 'undefined') options = {};\n    if (typeof options.faces === 'undefined') options.faces = 4;\n    if (typeof options.width === 'undefined') options.width = 150;\n    if (typeof options.height === 'undefined') options.height = 150;\n\n\n    ThreeCanvas.call(this, {width: options.width, height: options.height});\n    this.addClass(\"platon-solide\");\n\n    this.camera.position.z = 2.7;\n\n    var light = new THREE.HemisphereLight( 0xcceeff, 0x990000, 3.6 ); // soft white light\n    var light1 = new THREE.DirectionalLight( 0x997777, 5 );\n    var light2 = new THREE.DirectionalLight( 0x777799, 2 );\n    light1.position.set(43,13,5);\n    light2.position.set(-20,5,1);\n\n    var cube = this.createSolid( options.faces );\n\n    this.scene.add( cube );\n    this.scene.add( light1 );\n    this.scene.add( light2 );\n    this.scene.add( light );\n\n    this._rotator = new Rotator( cube );    \n\n    this.start();\n};\n\n// Extension of Widget.\nSolide.prototype = Object.create(ThreeCanvas.prototype);\nSolide.prototype.constructor = Solide;\n\n/**\n * @return void\n */\nSolide.prototype.onRender = function(time, delta) {\n    ThreeCanvas.prototype.onRender.call( this, time, delta );\n\n    this._rotator.rotate( time );\n\n    if (this._blinker) {\n        var opacity = Math.cos(time * 0.0001 * Math.PI);\n        if (opacity > 0.2) {\n            opacity = Math.min( 1, (opacity - .2) * 5 );\n            this._blinker.visible = true;\n            this._blinker.children.forEach(function (line) {\n                line.material.opacity = opacity;\n            });\n        } else {\n            this._blinker.visible = false;\n        }\n    }\n/*\n    var x = 20 * Math.abs(Math.cos(time / (sx + sy + sz)));\n    var y = 2 * Math.cos(3 * time / (sx + sy + sz));\n    this.css('transform', 'translate(-' + x + 'em,' + y + 'em)');\n*/\n};\n\n/**\n * @return void\n */\nSolide.prototype.getTetrahedronGeometry = function(radius) {\n    if (typeof radius === 'undefined') radius = 1;\n\n    var k = radius / Math.sqrt(3);\n    return {\n        vertices: [ [ k, k, k], [-k, k,-k], [ k,-k,-k], [-k,-k, k] ],\n        faces: [ [0,1,3], [0,2,1], [0,3,2], [1,2,3] ]\n    };\n};\n\n/**\n * @return void\n */\nSolide.prototype.getCubeGeometry = function(radius) {\n    if (typeof radius === 'undefined') radius = 1;\n\n    var k = radius / Math.sqrt(3);\n    return {\n        vertices: [\n            [ k, k, k], [ k, k,-k], [-k, k,-k], [-k, k, k],\n            [ k,-k, k], [ k,-k,-k], [-k,-k,-k], [-k,-k, k]\n        ],\n        faces: [\n            [0,1,2,3], [0,4,5,1], [1,5,6,2],\n            [4,7,6,5], [2,6,7,3], [0,3,7,4],\n        ]\n    };\n};\n\nSolide.prototype.getDodecahedronGeometry = function(radius) {\n    if (typeof radius === 'undefined') radius = 1;\n\n    var k = radius;\n    return {\n        vertices: [\n            [ 0, k, 0], [ k, 0, 0], [ 0, 0,-k],\n            [-k, 0, 0], [ 0, 0, k], [ 0,-k, 0]\n        ],\n        faces: [\n            [0,1,2], [0,2,3], [0,3,4], [0,4,1],\n            [5,4,3], [5,1,4], [5,2,1], [5,3,2],\n        ]\n    };\n};\n\n\nSolide.prototype.getIcosahedronGeometryA = function(radius) {\n    if (typeof radius === 'undefined') radius = 1;\n\n    var k = radius;\n    var vertices = [[0,k,0]];\n    var faces = [];\n    var i, ang;\n    var r = .3 * k;\n    var y = .2;\n\n    for ( i=0 ; i<5 ; i++ ) {\n        ang = i * 2 * Math.PI / 5;\n        vertices.push( [r * Math.cos( ang ), y, r * Math.sin( ang )] );\n        if (i < 4) {\n            faces.push( [0, i + 2, i + 1] );\n        } else {\n            faces.push( [0, 1, 5] );\n        }\n    }\n\n    for ( i=0 ; i<5 ; i++ ) {\n        ang = Math.PI / 5 + i * 2 * Math.PI / 5;\n        vertices.push( [r * Math.cos( ang ), -y, r * Math.sin( ang )] );\n        if (i < 4) {\n            faces.push( [11, i + 6, i + 7] );\n        } else {\n            faces.push( [11, 10, 6] );\n        }\n    }\n    vertices.push( [0,-k,0] );\n\n    return {\n        vertices: vertices,\n        faces: faces\n    };\n};\n\n\nSolide.prototype.getIcosahedronGeometryB = function(radius) {\n    if (typeof radius === 'undefined') radius = 1;\n\n    var k = radius;\n    var vertices = [[0,k,0]];\n    var faces = [];\n    var i, ang;\n    var r = .9 * k;\n    var y = 1 - r * Math.sqrt( 4 * Math.sin(Math.PI / 5) * Math.sin(Math.PI / 5) - 1 );\n\n    for ( i=0 ; i<5 ; i++ ) {\n        ang = i * 2 * Math.PI / 5;\n        vertices.push( [r * Math.cos( ang ), y, r * Math.sin( ang )] );\n        if (i < 4) {\n            faces.push( [0, i + 2, i + 1] );\n        } else {\n            faces.push( [0, 1, 5] );\n        }\n    }\n\n    for ( i=0 ; i<5 ; i++ ) {\n        ang = Math.PI / 5 + i * 2 * Math.PI / 5;\n        vertices.push( [r * Math.cos( ang ), -y, r * Math.sin( ang )] );\n        if (i < 4) {\n            faces.push( [11, i + 6, i + 7] );\n        } else {\n            faces.push( [11, 10, 6] );\n        }\n    }\n    vertices.push( [0,-k,0] );\n\n    return {\n        vertices: vertices,\n        faces: faces\n    };\n};\n\n\n/**\n * @return void\n */\nSolide.prototype.createSolid = function(nbFaces) {\n    var colors = [\n        new THREE.Color( 0xaaffaa ),\n        new THREE.Color( 0xffaaaa ),\n        new THREE.Color( 0xaaaaff ),\n        new THREE.Color( 0xffffaa ),\n        new THREE.Color( 0xffaaff ),\n        new THREE.Color( 0xaaffff )\n    ];\n\n    var mesh, opt;\n    var k = 1 / Math.sqrt(3);\n    if (nbFaces == 4) {\n        mesh = new THREE.Group();\n        opt = this.getTetrahedronGeometry();\n        opt.colors = colors;\n        mesh.add( this.createMesh( opt ) );\n        opt = this.getCubeGeometry();\n        opt.solid = false;\n        this._blinker = this.createMesh( opt );\n        mesh.add( this._blinker );\n    }\n    else if (nbFaces == 6) {\n        mesh = new THREE.Group();\n        opt = this.getCubeGeometry();\n        opt.colors = colors;\n        mesh.add( this.createMesh( opt ) );\n    }\n    else if (nbFaces == 8) {\n        mesh = new THREE.Group();\n        opt = this.getDodecahedronGeometry();\n        opt.colors = colors;\n        opt.nbColors = 4;\n        mesh.add( this.createMesh( opt ) );\n        opt = this.getCubeGeometry(.59);\n        opt.solid = false;\n        opt.colors = colors;\n        this._blinker = this.createMesh( opt );\n        mesh.add( this._blinker );        \n    }\n    else if (nbFaces == '20a') {\n        mesh = new THREE.Group();\n        opt = this.getIcosahedronGeometryA();\n        opt.colors = colors;\n        opt.nbColors = 5;\n        mesh.add( this.createMesh( opt ) );\n    }\n    else if (nbFaces == '20b') {\n        mesh = new THREE.Group();\n        opt = this.getIcosahedronGeometryB();\n        opt.colors = colors;\n        opt.nbColors = 5;\n        mesh.add( this.createMesh( opt ) );\n    }\n    else if (nbFaces == 20) {\n        mesh = new THREE.Group();\n        opt = this.getIcosahedronGeometry();\n        opt.colors = colors;\n        opt.nbColors = 5;\n        mesh.add( this.createMesh( opt ) );\n    }\n\n    return mesh;\n};\n\n\nSolide.create = function() {\n    return new Solide();\n};\nmodule.exports = Solide;\n\n }\n"],"names":["addListener","e","l","window","addEventListener","attachEvent","require","modules","id","body","mod","err","Error","console","error","stack","exports","document","parentNode","$data","faces","x","window","exports","module","config","name","description","author","version","major","minor","revision","date","Date","currentLang","lang","undefined","localStorage","getItem","navigator","language","browserLanguage","substr","toLowerCase","setItem","intl","words","params","txt","newTxt","i","c","lastIdx","pos","dic","k","length","charAt","substring","charCodeAt","window","exports","module","TreeCanvas","require","Rotator","Dodeca1","options","faces","width","height","call","this","addClass","grp","THREE","Group","add","createPentagon","addChildren","camera","position","z","scene","_rotator","light","HemisphereLight","light1","DirectionalLight","light2","set","start","css","prototype","Object","create","constructor","onRender","time","delta","rotate","pentagons","forEach","pentagon","idx","t","threshold","bound","alpha","Math","cos","rotation","y","radius","angle","i","vertices","face","PI","push","sin","createMesh","doublesided","createPentagon2","dx","dy","parent","x","opt","window","exports","module","Rotator","obj","sx","sy","sz","Math","random","this","prototype","rotate","time","rotation","x","y","create","window","exports","module","animate","time","registeredAnimations","length","forEach","item","render","requestAnimationFrame","Register","anim","indexOf","push","Unregister","pos","splice","addFace","geometry","vertices","color","faces","THREE","Face3","x","y","z","idx","vertex","k","Vector3","i","face","vertexColors","Widget","require","Canvas","options","call","this","addClass","width","innerWidth","height","innerHeight","W","H","css","scene","Scene","camera","PerspectiveCamera","position","renderer","WebGLRenderer","alpha","setClearColor","setSize","append","domElement","_time","prototype","Object","create","constructor","onRender","delta","start","stop","createMesh","opt","Error","colors","Color","Math","random","nbColors","solid","wireframe","wirecolor","wirewidth","doublesided","mat","MeshPhongMaterial","specular","shininess","metal","VertexColors","side","DoubleSide","FrontSide","transparent","opacity","grp","Group","geo","Geometry","idxFace","computeFaceNormals","computeVertexNormals","add","Mesh","LineBasicMaterial","linewidth","cache","line","key","a","b","tmp","type","Lines","Line","console","info","window","exports","module","Widget","options","this","__data","e","innerHTML","childNodes","element","tag","id","document","getElementById","Error","createElement","addClass","ex","console","error","JSON","stringify","prototype","v","undefined","_element","querySelector","data","k","detach","p","parentNode","removeChild","addEvent","name","slot","sender","key","x","f","call","addEventListener","evt","preventDefault","stopPropagation","removeAttr","i","arg","arguments","length","removeAttribute","hasAttribute","attr","val","ns","getAttribute","className","setAttributeNS","setAttribute","text","css","style","insertAfter","target","insertBefore","nextSibling","append","createTextNode","Array","isArray","forEach","item","appendChild","appendTo","parent","onAppend","appendToBody","body","hasClass","classList","contains","trim","add","removeClass","remove","toggleClass","toggle","clear","firstChild","child","nodeType","nodeValue","html","focus","rect","getBoundingClientRect","Tap","_Tap","that","activatePointerEvents","_pointerEvents","start","pe","touch","Date","now","tap","delta","div","isInDOM","create","args","find","query","svg","attribs","namespace","createElementNS","w","version","viewBox","width","height","fromTextOrHtml","txt","span","substr","testElement","createMethod","method","original","DOMTokenList","token","len","_toggle","force","classListProp","protoProp","elemCtrProto","Element","objCtr","Object","strTrim","String","rx","RegExp","replace","arrIndexOf","indexOf","DOMEx","type","message","code","DOMException","checkTokenAndGetIndex","test","ClassList","elem","trimmedClasses","classes","split","push","_updateClassName","toString","classListProto","classListGetter","tokens","l","updated","index","splice","result","join","defineProperty","classListPropDesc","get","enumerable","configurable","number","__defineGetter__","window","exports","module","id","modName","args","dst","document","getElementById","require","src","element","$ctrl","setAttribute","parentNode","replaceChild","window","exports","module","ThreeCanvas","require","Rotator","Solide","options","faces","width","height","call","this","addClass","camera","position","z","light","THREE","HemisphereLight","light1","DirectionalLight","light2","set","cube","createSolid","scene","add","_rotator","start","prototype","Object","create","constructor","onRender","time","delta","rotate","_blinker","opacity","Math","cos","PI","min","visible","children","forEach","line","material","getTetrahedronGeometry","radius","k","sqrt","vertices","getCubeGeometry","getDodecahedronGeometry","getIcosahedronGeometryA","i","ang","r","y","push","sin","getIcosahedronGeometryB","nbFaces","mesh","opt","colors","Color","Group","createMesh","solid","nbColors","getIcosahedronGeometry"],"mappings":"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"}
>>>>>>> a1601a20b1a2a3b9f06f7a047ab3ad29eb328f29
