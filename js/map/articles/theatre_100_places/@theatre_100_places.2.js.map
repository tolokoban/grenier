{"version":3,"file":"articles/theatre_100_places/@theatre_100_places.2.js.map","sources":["articles/theatre_100_places/@theatre_100_places.2.js","$.js","polyfill.mathml.js","theatre100.main.js","wdg.js","x-widget.js","theatre100.js"],"sourcesContent":["var require = function() {\r\n    var modules = {};\r\n    \r\n    return function(id, body) {\r\n        var mod;\r\n        body = window[\"#\" + id];\r\n        if (typeof body === 'undefined') {\r\n            var err = new Error(\"Required module is missing: \" + id);   \r\n            console.error(err.stack);\r\n            throw err;\r\n        }\r\n        mod = modules[id];\r\n        if (typeof mod === 'undefined') {\r\n            mod = {exports: {}};\r\n            var exports = mod.exports;\r\n            body(exports, mod);\r\n            modules[id] = mod.exports;\r\n            mod = mod.exports;\r\n            //console.log(\"Module initialized: \" + id);\r\n        }\r\n        return mod;\r\n    };\r\n}();\r\nfunction addListener(e,l) {\r\n    if (window.addEventListener) {\r\n        window.addEventListener(e,l,false);\r\n    } else {\r\n        window.attachEvent('on' + e, l);\r\n    }\r\n};\r\n\r\naddListener(\r\n    'DOMContentLoaded',\r\n    function() {\r\n        document.body.parentNode.$data = {};\r\n        // Attach controllers.\r\n        try{require('x-widget')('theatre10015','theatre100',\"\")}catch(x){console.error('Unable to initialize theatre100!', x)}\ntry{require('x-widget')('theatre100.main16','theatre100.main',{size: 2})}catch(x){console.error('Unable to initialize theatre100.main!', x)}\ntry{require('x-widget')('theatre100.main17','theatre100.main',{size: 3})}catch(x){console.error('Unable to initialize theatre100.main!', x)}\ntry{require('x-widget')('theatre100.main18','theatre100.main',{size: 4})}catch(x){console.error('Unable to initialize theatre100.main!', x)}\ntry{require('x-widget')('theatre100.main19','theatre100.main',{size: 5})}catch(x){console.error('Unable to initialize theatre100.main!', x)}\ntry{require('x-widget')('theatre100.main20','theatre100.main',{size: 6})}catch(x){console.error('Unable to initialize theatre100.main!', x)}\ntry{require('x-widget')('theatre100.main21','theatre100.main',{size: 7})}catch(x){console.error('Unable to initialize theatre100.main!', x)}\nrequire('polyfill.mathml');\r\n    }\r\n);\r\n","window['#$']=function(exports,module){  exports.config={\n    name:\"grenier\",\n    description:\"Articles concernant majoritairement l'algorithmie\",\n    author:\"Tolokoban\",\n    version:\"1.0.517\",\n    major:1,\n    minor:0,\n    revision:517,\n    date:new Date(2016,1,11,22,3,2)\n};\nvar currentLang = null;\nexports.lang = function(lang) {\n    if (lang === undefined) {\n        lang = window.localStorage.getItem(\"Language\");\n        if (!lang) {\n            lang = window.navigator.language;\n            if (!lang) {\n                lang = window.navigator.browserLanguage;\n                if (!lang) {\n                    lang = \"fr\";\n                }\n            }\n        }\n        lang = lang.substr(0, 2).toLowerCase();\n    }\n    currentLang = lang;\n    window.localStorage.setItem(\"Language\", lang);\n    return lang;\n};\nexports.intl = function(words, params) {\n    var dic = words[exports.lang()],\n    k = params[0],\n    txt, newTxt, i, c, lastIdx, pos;\n    if (!dic) {\n        //console.error(\"Missing internationalization for language : \\\"\" + exports.lang() + \"\\\"!\");\n        return k;\n    }\n    txt = dic[k];\n    if (!txt) {\n        //console.error(\"Missing internationalization [\" + exports.lang() + \"]: \\\"\" + k + \"\\\"!\");\n        return k;\n    }\n    if (params.length > 1) {\n        newTxt = \"\";\n        lastIdx = 0;\n        for (i = 0 ; i < txt.length ; i++) {\n            c = txt.charAt(i);\n            if (c === '$') {\n                newTxt += txt.substring(lastIdx, i);\n                i++;\n                pos = txt.charCodeAt(i) - 48;\n                if (pos < 0 || pos >= params.length) {\n                    newTxt += \"$\" + txt.charAt(i);\n                } else {\n                    newTxt += params[pos];\n                }\n                lastIdx = i + 1;\n            } else if (c === '\\\\') {\n                newTxt += txt.substring(lastIdx, i);\n                i++;\n                newTxt += txt.charAt(i);\n                lastIdx = i + 1;\n            }\n        }\n        newTxt += txt.substr(lastIdx);\n        txt = newTxt;\n    }\n    return txt;\n};\n }\r\n","window['#polyfill.mathml']=function(exports,module){  /****************************************\r\n Until now (february 2016), only Firefox and Safari support MathML.\r\n\r\n this polyfill  detects the  lack of MathML  support and  transform every\r\n MathML tag in some thing that vagueley looks like real MathML.\r\n ****************************************/\r\n\r\n\r\nfunction hasMathMLSupport() {\r\n    var div = document.createElement(\"div\"), box;\r\n    div.innerHTML = \"<math><mspace height='23px' width='77px'/></math>\";\r\n    document.body.appendChild(div);\r\n    box = div.firstChild.firstChild.getBoundingClientRect();\r\n    document.body.removeChild(div);\r\n    return Math.abs(box.height - 23) <= 1  && Math.abs(box.width - 77) <= 1;\r\n}\r\n\r\n\r\nif (!hasMathMLSupport()) {\r\n    polyfill();\r\n    console.warn(\"MathML is not supported! The polyfill will be activated.\");\r\n} else {\r\n    console.log(\"MathML is supported!\");\r\n}\r\n\r\n\r\nfunction polyfill() {\r\n    var mathmlNodes = document.querySelectorAll(\"math\");\r\n    var node;\r\n    for ( var i=0 ; i<mathmlNodes.length ; i++ ) {\r\n        node = mathmlNodes[i];\r\n        node.parentNode.replaceChild( transform( node ), node );\r\n    }\r\n}\r\n\r\n\r\nfunction transform(root) {\r\n    var e = document.createElement(\"div\");\r\n    e.className = \"math\";\r\n    e.innerHTML = root.innerHTML;\r\n    return e;\r\n}\r\n }\r\n","window['#theatre100.main']=function(exports,module){  \"use strict\";\nvar Widget = require(\"wdg\");\n\n/**\n * @example\n * var Main = require(\"theatre100.main\");\n * var instance = new Main(args);\n * @class Main\n */\nvar Main = function(args) {\n    Widget.call(this);\n    this.addClass(\"theatre100-main\");\n    if (typeof args === 'undefined') args = {};\n    if (typeof args.size === 'undefined') args.size = 5;\n\n    this._args = args;\n\n    var values = [];\n    var i;\n\n    for (i = 0 ; i < args.size ; i++) {\n        values.push(0);\n    }\n\n    this._count = 0;\n    this._wins = 0;\n\n    for (i = 0 ; i < args.size ; i++) {\n        values[i] = 1;\n        recurse.call(this, values, 2);\n        values[i] = 0;\n    }\n\n    this.append(\n        \" \" + this._wins + \" / \" + this._count,\n        \" (\" + (100 * this._wins / this._count).toFixed(0) + \" %)\"\n    );\n};\n\n// Extension of Widget.\nMain.prototype = Object.create(Widget.prototype);\nMain.prototype.constructor = Main;\n\n/**\n * @return void\n */\nMain.prototype.add = function(values) {\n    values.forEach(function (number, index) {\n        var span = Widget.tag('span').text(number).addClass(number == index + 1 ? 'ok' : 'ko');\n        if (index == values.length - 1) {\n            span.addClass('last');\n            if (number == index + 1) {\n                this._wins++;\n            }\n            this._count++;\n        }\n        this.append(span);\n    }, this);\n    return this.append(Widget.tag('span').text(\" \"));\n};\n\n\n\nMain.create = function(args) {\n    return new Main(args);\n};\nmodule.exports = Main;\n\n\n\nfunction recurse(values, number) {\n    if (number > values.length) {\n        this.add(values);\n        return;\n    }\n\n    var args = this._args;\n    var i;\n\n    if (values[number - 1] == 0) {\n        values[number - 1] = number;\n        recurse.call(this, values, number + 1);\n        values[number - 1] = 0;\n    } else {\n        for (i = 0 ; i < args.size ; i++) {\n            if (values[i] == 0) {\n                values[i] = number;\n                recurse.call(this, values, number + 1);\n                values[i] = 0;\n            }\n        }\n    }\n}\n }\r\n","window['#wdg']=function(exports,module){  'use strict';\r\n\r\n/**\r\n * Widgets inherit this class.\r\n */\r\nfunction Widget(options) {\r\n    this.__data = {};\r\n    try {\r\n        var e;\r\n        if (typeof options === 'undefined') options = {};\r\n        if (typeof options.innerHTML !== 'undefined' && typeof options.childNodes !== 'undefined') {\r\n            // On passe directement un élément.\r\n            options = {element: options};\r\n        }\r\n        if (typeof options.tag === 'undefined') options.tag = \"div\";\r\n        if (options.element) {\r\n            this.element(options.element);\r\n        } else if (typeof options.id !== 'undefined') {\r\n            e = window.document.getElementById(options.id);\r\n            if (!e) {\r\n                throw Error(\"Can't find element with id: \\\"\" + options.id + \"\\\"!\");\r\n            }\r\n            this.element(e);\r\n        } else {\r\n            this.element(window.document.createElement(options.tag));\r\n            this.addClass(\"wdg\", \"custom\");\r\n        }\r\n    }\r\n    catch (ex) {\r\n        console.error(\"[widget] \", ex);\r\n        console.error(\"[Widget] \", JSON.stringify(options));\r\n        throw Error(ex);\r\n    }\r\n}\r\n\r\nWidget.prototype = {\r\n    /**\r\n     * Accessor for attribute element\r\n     * @return element\r\n     */\r\n    element: function(v) {\r\n        if (v === undefined) return this._element;\r\n        if (typeof v === 'string') {\r\n            v = window.document.querySelector(v);\r\n        }\r\n        this._element = v;\r\n        return this;\r\n    },\r\n\r\n    data: function(k, v) {\r\n        if (typeof v === 'undefined') {\r\n            return this.__data[k];\r\n        }\r\n        this.__data[k] = v;\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Remove this element from its parent.\r\n     * @memberof wdg\r\n     */\r\n    detach: function() {\r\n        var e = this._element;\r\n        if (e) {\r\n            var p = e.parentNode;\r\n            if (p) {\r\n                p.removeChild(e);\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     *\r\n     * @param name\r\n     * @memberof wdg\r\n     */\r\n    addEvent: function(name, slot, sender) {\r\n        if (typeof slot === 'string') {\r\n            var that = this, key = slot;\r\n            if (typeof sender === 'undefined') sender = this;\r\n            slot = function(x) {\r\n                var f = sender[key];\r\n                if (typeof f === 'function') {\r\n                    f.call(sender, x);\r\n                } else {\r\n                    throw Error(\"\\\"\" + slot + \"\\\" is not a function of: \" + sender);\r\n                }\r\n            };\r\n        }\r\n        var e = this.element();\r\n        if (name == 'tap') {\r\n            e.addEventListener(\r\n                \"mousedown\",\r\n                function(evt) {\r\n                    evt.preventDefault();\r\n                    evt.stopPropagation();\r\n                },\r\n                false\r\n            );\r\n            e.addEventListener(\r\n                \"mouseup\",\r\n                function(evt) {\r\n                    evt.preventDefault();\r\n                    evt.stopPropagation();\r\n                    slot(evt);\r\n                },\r\n                false\r\n            );\r\n            e.addEventListener(\"touchend\", slot, false);\r\n\r\n        } else {\r\n            e.addEventListener(name, slot, false);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Retire un attribut à l'élément sous-jacent.\r\n     * @example\r\n     * this.removeAttr(\"selected\");\r\n     * @memberof wdg\r\n     */\r\n    removeAttr: function() {\r\n        if (this._element) {\r\n            var i, arg;\r\n            for (i = 0 ; i < arguments.length ; i++) {\r\n                arg = arguments[i];\r\n                this._element.removeAttribute(arg);\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Teste l'existence d'un attribut dans l'élément sous-jacent.\r\n     * @memberof wdg\r\n     */\r\n    hasAttribute: function(key) {\r\n        if (!this._element) return false;\r\n        return this._element.hasAttribute(key);\r\n    },\r\n\r\n    /**\r\n     * Lit ou affecte la valeur d'un attribut de l'élément sous-jacent.\r\n     * @example\r\n     * // Le pseudo attribut '$' sert à insérer du texte.\r\n     * var div = new Widget();\r\n     * div.attr({$: 'Hello world!', title: 'Typical first sentence...'});\r\n     * @param key Nom de l'attribut ou dictionnaire des attributs.\r\n     * @param val [Facultatif] Valeur de l'attribut. Si elle est omise, la méthode retourne la valeur actuelle.\r\n     * @param ns [Facultatif] Namespace éventuel.\r\n     * @memberof wdg\r\n     */\r\n    attr: function(key, val, ns) {\r\n        var k;\r\n        if (!this._element || !this._element.getAttribute) return null;\r\n        if (typeof key == \"string\") {\r\n            if (val !== undefined) {\r\n                if (key == \"class\") {\r\n                    this._element.className = val;\r\n                    return this;\r\n                }\r\n                if (ns && this._element.setAttributeNS) {\r\n                    this._element.setAttributeNS(ns, key, val);\r\n                }\r\n                else {\r\n                    this._element.setAttribute(key, val);\r\n                }\r\n                return this;\r\n            }\r\n            return this._element.getAttribute(key);\r\n        }\r\n        if (typeof key == \"object\") {\r\n            for (k in key) {\r\n                if (k == \"class\") {\r\n                    this._element.className = key[k];\r\n                } else if (k == \"$\") {\r\n                    this.text(key[k]);\r\n                } else {\r\n                    this._element.setAttribute(k, key[k]);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n\r\n    /**\r\n     * Permet de changer le style de l'élément sous-jacent.\r\n     * @example\r\n     * this.css(\"color\", \"red\");\r\n     * alert(this.css(\"display\"));\r\n     * this.css(\r\n     *   {\r\n     *     margin: \"0px\",\r\n     *     padding: \"3px\",\r\n     *     border: \"1px solid black\"\r\n     *   }\r\n     * );\r\n     * @param key Nom du champ de style ou dictionnaire clefs/valeurs.\r\n     * @param val  Valeur du champ key.  S'il est omis et  que \"key\"\r\n     * est  de type  string,  alors la  méthode  retourne la  valeur\r\n     * actuelle.\r\n     * @memberof wdg\r\n     */\r\n    css: function(key, val) {\r\n        var k, e = this._element;\r\n        if (!e) return null;\r\n        if (typeof e.style !== 'object') {\r\n            console.error(\"[wdg.css] This element does not support styles!\", e);\r\n            e.style = {};\r\n        }\r\n        if (typeof key == 'string') {\r\n            if (val) {\r\n                e.style[key] = val;\r\n                return this;\r\n            }\r\n            return e.style[key];\r\n        }\r\n        if (typeof key == 'object') {\r\n            for (k in key) {\r\n                try {\r\n                    e.style[k] = key[k];\r\n                } catch (x) {\r\n                    console.error(\"[wdg.css] Bad CSS attribute \" + k + \": \" + key[k]);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    insertAfter: function(target) {\r\n        if (typeof target.element === 'function') {\r\n            target = target.element();\r\n        }\r\n        target.parentNode.insertBefore(this.element(), target.nextSibling);\r\n        return this;\r\n    },\r\n\r\n    insertBefore: function(target) {\r\n        if (typeof target.element === 'function') {\r\n            target = target.element();\r\n        }\r\n        target.parentNode.insertBefore(this.element(), target);\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Append children to this widget.\r\n     */\r\n    append: function() {\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            if (typeof arg === 'number') arg = \"\" + arg;\r\n            if (typeof arg === 'undefined' || (typeof arg !== 'object' && typeof arg !== 'string')) {\r\n                console.error(\"[Widget.append] Argument #\" + i + \" is invalid!\", arguments);\r\n                console.error(\"[Widget.append] Is type is: \" + (typeof arg));\r\n                continue;\r\n            };\r\n            if (typeof arg === 'string') {\r\n                if (arg.length < 1) arg = \" \";\r\n                arg = window.document.createTextNode(arg);\r\n                if (!arg) {\r\n                    console.error(\r\n                        \"[Widget.append] Unable to create a text node with this text: \", arg\r\n                    );\r\n                    console.error(\"[wdg] arguments=...\", arguments);\r\n                    throw Error(\r\n                        \"[Widget.append] Unable to create a text node with this text: \"\r\n                            + JSON.stringify(arg)\r\n                    );\r\n                }\r\n            }\r\n            if (Array.isArray(arg)) {\r\n                arg.forEach(\r\n                    function(item) {\r\n                        this.append(item);\r\n                    }, this\r\n                );\r\n            } else {\r\n                var e = typeof arg.element === 'function' ? arg.element() : arg;\r\n                this._element.appendChild(e);\r\n                /*\r\n                 if (typeof arg.onAppend === 'function') {\r\n                 arg.onAppend.call(arg);\r\n                 }\r\n                 */\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Append this widget to a parent.\r\n     * @param parent\r\n     * @memberof wdg\r\n     */\r\n    appendTo: function(parent) {\r\n        if (!parent) return this;\r\n        if (typeof parent.append === 'function') {\r\n            parent.append(this);\r\n        } else if (typeof parent.appendChild === 'function') {\r\n            parent.appendChild(this._element);\r\n            this.onAppend();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Append this widget to BODY.\r\n     * @memberof wdg\r\n     */\r\n    appendToBody: function() {\r\n        window.document.body.appendChild(this._element);\r\n        return this;\r\n    },\r\n\r\n    hasClass: function() {\r\n        var e = this._element.classList;\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            if (!e.contains(arg)) return false;\r\n        }\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Add CSS classe(s) to this widget.\r\n     * @memberof wdg\r\n     */\r\n    addClass: function() {\r\n        var e = this._element.classList;\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            if (typeof arg === 'string') {\r\n                arg = arg.trim();\r\n                if (arg.length > 0) e.add(arg);\r\n            } else {\r\n                console.error(\"[wdg.addClass] Arguments with bad type!\", arguments);\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Remove CSS classe(s) to this widget.\r\n     * @memberof wdg\r\n     */\r\n    removeClass: function() {\r\n        var e = this._element.classList;\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            e.remove(arg);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Toggle CSS classe(s) to this widget.\r\n     * @memberof wdg\r\n     */\r\n    toggleClass: function() {\r\n        var e = this._element.classList;\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            e.toggle(arg);\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * Remove all children of this widget.\r\n     * Any argument passed will be appended to this widget.\r\n     * @memberof wdg\r\n     */\r\n    clear: function() {\r\n        // (!) On préfère retirer les éléments un par un du DOM plutôt que d'utiliser simplement\r\n        // this.html(\"\").\r\n        // En effet, le code simplifié a des conséquences inattendues dans IE9 et IE10 au moins.\r\n        // Le bug des markers qui disparaissaients sur les cartes de Trail-Passion 4 a été corrigé\r\n        // avec cette modification.\r\n        var e = this.element();\r\n        while(e.firstChild){\r\n            e.removeChild(e.firstChild);\r\n        }\r\n        var i, arg;\r\n        for (i = 0 ; i < arguments.length ; i++) {\r\n            arg = arguments[i];\r\n            this.append(arg);\r\n        }\r\n\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * 1) Sans argument, cette  fonction retourne le texte contenu\r\n     * dans ce widget.\r\n     * 2) Avec  un texte en  argument, cette fonction  retire tous\r\n     * les  enfants de  ce widget  et  les remplace  par un  noeud\r\n     * texte.\r\n     * 3)  Avec un  élément  du DOM  en  argument, cette  fonction\r\n     * retourne le texte contenu par ce dernier.\r\n     * @memberof tfw.Widget\r\n     */\r\n    text: function(arg) {\r\n        var e, text, i, child;\r\n        if (typeof arg == 'string' || typeof arg == 'number') {\r\n            this.clear();\r\n            this._element.appendChild(window.document.createTextNode(arg));\r\n            return this;\r\n        } else {\r\n            // On retourne le contenu textuel de ce widget.\r\n            e = this._element;\r\n            if (arg !== undefined) {\r\n                // On peut passer un élément du DOM pour en extraire son contenu textuel.\r\n                e = arg;\r\n            }\r\n            text = \"\";\r\n            if (e.childNodes) {\r\n                for (i=0 ; i<e.childNodes.length ; i++) {\r\n                    child = e.childNodes[i];\r\n                    if (child.nodeType == 3) {\r\n                        if (child.nodeValue) {\r\n                            text += child.nodeValue;\r\n                        }\r\n                    } else {\r\n                        text += this.text( child );\r\n                    }\r\n                }\r\n            }\r\n            return text;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     *\r\n     * @param html\r\n     * @memberof wdg\r\n     */\r\n    html: function(html) {\r\n        if (typeof html === 'undefined') return this._element.innerHTML;\r\n        if (this._element) this._element.innerHTML = html;\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * If applicable, give focus to this element.\r\n     * @memberof wdg\r\n     */\r\n    focus: function() {\r\n        var e = this._element;\r\n        if (!e) return this;\r\n        if (typeof e.focus === 'function') {\r\n            e.focus();\r\n        }\r\n        return this;\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     * Returns the bounds of the underlying element.\r\n     * @memberof wdg\r\n     */\r\n    rect: function() {\r\n        var e = this._element;\r\n        if (!e) return null;\r\n        return e.getBoundingClientRect();\r\n    },\r\n\r\n    /**\r\n     * @description\r\n     *\r\n     * @param\r\n     * @memberof wdg\r\n     */\r\n    Tap: function(slot, sender) {\r\n        if (typeof slot === 'undefined') return this._Tap;\r\n        var that = this;\r\n        if (typeof sender === 'undefined') sender = that;\r\n        if (typeof slot === 'string') slot = sender[slot];\r\n        if (!this._Tap) {\r\n            this.activatePointerEvents();\r\n        }\r\n        this._Tap = [slot, sender];\r\n        return this;\r\n    }\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nWidget.prototype.activatePointerEvents = function() {\r\n    if (this._pointerEvents) return this;\r\n    this._pointerEvents = {start: 0};\r\n\r\n    /*\r\n     interact(this.element()).on(\"tap\", function(evt) {\r\n     var slot = that._Tap;\r\n     if (slot) {\r\n     slot[0].call(slot[1], {x: evt.x, y: evt.y});\r\n     }\r\n     });\r\n     return this;\r\n     */\r\n    var pe = this._pointerEvents;\r\n    var that = this;\r\n    this.addEvent(\r\n        \"touchstart\",\r\n        function(evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            pe.touch = 1;\r\n            pe.start = Date.now();\r\n        }\r\n    );\r\n    this.addEvent(\r\n        \"touchend\",\r\n        function(evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            var tap = that._Tap;\r\n            if (!tap) return;\r\n            pe.touch = 0;\r\n            var delta = Date.now() - pe.start;\r\n            if (delta > 50) {\r\n                tap[0].call(tap[1], evt);\r\n            }\r\n        }\r\n    );\r\n    this.addEvent(\r\n        \"mousedown\",\r\n        function(evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            if (pe.touch) return;\r\n            pe.start = Date.now();\r\n        }\r\n    );\r\n    this.addEvent(\r\n        \"mouseup\",\r\n        function(evt) {\r\n            evt.preventDefault();\r\n            evt.stopPropagation();\r\n            var tap = that._Tap;\r\n            if (!tap) return;\r\n            var delta = Date.now() - pe.start;\r\n            if (delta > 50) {\r\n                tap[0].call(tap[1], evt);\r\n            }\r\n        }\r\n    );\r\n\r\n    return this;\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nWidget.prototype.div = function() {\r\n    var div = new Widget();\r\n    for (var i = 0 ; i < arguments.length ; i++) {\r\n        div.addClass(arguments[i]);\r\n    }\r\n    return div;\r\n};\r\n\r\nWidget.prototype.tag = function(tag) {\r\n    if (typeof tag === 'undefined') tag = 'div';\r\n    var div = new Widget({tag: tag});\r\n    for (var i = 1 ; i < arguments.length ; i++) {\r\n        div.addClass(arguments[i]);\r\n    }\r\n    return div;\r\n};\r\n\r\n/**\r\n * @return void\r\n */\r\nWidget.prototype.isInDOM = function() {\r\n    return Widget.isInDOM(this.element());\r\n};\r\n\r\n/**\r\n * Fonction à surcharger  si on veut réagir lors de  l'insertion dans le\r\n * DOM.\r\n */\r\nWidget.prototype.onAppend = function() {};\r\n\r\nWidget.create = function(args) {\r\n    return new Widget(args);\r\n};\r\n\r\nWidget.find = function(query) {\r\n    return new Widget({element: window.document.querySelector(query)});\r\n};\r\n\r\n\r\n/**\r\n * Create a SVG élément with attributes.\r\n */\r\nWidget.svg = function(tag, attribs) {\r\n    var namespace = \"http://www.w3.org/2000/svg\";\r\n    if (typeof tag === 'object') {\r\n        attribs = tag;\r\n        tag = \"svg\";\r\n    }\r\n    if (typeof tag !== 'string') tag = 'svg';\r\n    var e = window.document.createElementNS(namespace, tag);\r\n    var w = new Widget({element: e});\r\n    if (typeof attribs === 'undefined') attribs = {};\r\n    if (tag == 'svg') {\r\n        if (typeof attribs.version === 'undefined') attribs.version = \"1.1\";\r\n        if (typeof attribs['xmlns:svg'] === 'undefined') {\r\n            attribs['xmlns:svg'] = 'http://www.w3.org/2000/svg';\r\n        }\r\n        if (typeof attribs['xmlns'] === 'undefined') {\r\n            attribs['xmlns'] = 'http://www.w3.org/2000/svg';\r\n        }\r\n        if (typeof attribs['xmlns:xlink'] === 'undefined') {\r\n            attribs['xmlns:xlink'] = 'http://www.w3.org/1999/xlink';\r\n        }\r\n        if (typeof attribs.viewBox === 'undefined'\r\n            && typeof attribs.width === 'number'\r\n            && typeof attribs.height === 'number')\r\n        {\r\n            attribs.viewBox = \"0 0 \" + attribs.width + \" \" + attribs.height;\r\n        }\r\n    }\r\n    if (typeof attribs === 'object') {\r\n        w.attr(attribs);\r\n    }\r\n    return w;\r\n};\r\n\r\n/**\r\n * Tester si le widget ou élément est actuellement attaché au DOM.\r\n */\r\nWidget.isInDOM = function(e) {\r\n    if (!e) return false;\r\n    if (typeof e.element === 'function') {\r\n        e = e.element();\r\n    }\r\n    if (e === window.document) return true;\r\n    return Widget.isInDOM(e.parentNode);\r\n};\r\n\r\n/**\r\n * Create a `span` with a text or an HTML content.\r\n * If `txt` starts with `<html>`, we set an HTML content.\r\n */\r\nWidget.fromTextOrHtml = function(txt) {\r\n    var e = Widget.span();\r\n    if (txt.substr(0, 6) == '<html>') {\r\n        e.html(txt.substr(6));\r\n    } else {\r\n        e.text(txt);\r\n    }\r\n    return e;\r\n};\r\n\r\n/**\r\n * Create a DIV and apply all arguments as classes to it.\r\n */\r\nWidget.div = function() {\r\n    var div = new Widget({tag: \"div\"});\r\n    for (var i = 0 ; i < arguments.length ; i++) {\r\n        div.addClass(arguments[i]);\r\n    }\r\n    return div;\r\n};\r\n\r\n/**\r\n * Create a SPAN and apply all arguments as classes to it.\r\n */\r\nWidget.span = function() {\r\n    var div = new Widget({tag: \"span\"});\r\n    for (var i = 0 ; i < arguments.length ; i++) {\r\n        div.addClass(arguments[i]);\r\n    }\r\n    return div;\r\n};\r\n\r\nWidget.tag = function(tag) {\r\n    if (typeof tag === 'undefined') tag = 'div';\r\n    var div = new Widget({tag: tag});\r\n    for (var i = 1 ; i < arguments.length ; i++) {\r\n        div.addClass(arguments[i]);\r\n    }\r\n    return div;\r\n};\r\n\r\nWidget.id = function(id) {\r\n    return new Widget({element: window.document.getElementById(id)});\r\n};\r\n\r\n/**\r\n * Widget defining the `document.body` element.\r\n */\r\nWidget.body = new Widget(window.document.body);\r\n\r\nmodule.exports = Widget;\r\n\r\n\r\n\r\n/*\r\n * classList.js: Cross-browser full element.classList implementation.\r\n * 2014-07-23\r\n *\r\n * http://purl.eligrey.com/github/classList.js/blob/master/classList.js\r\n *\r\n * By Eli Grey, http://eligrey.com\r\n * Public Domain.\r\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\r\n */\r\n\r\n// Full polyfill for browsers with no classList support\r\nif (!(\"classList\" in window.document.createElement(\"_\"))) {\r\n    (function () {\r\n        \"use strict\";\r\n\r\n        if (!('Element' in window)) return;\r\n\r\n        var classListProp = \"classList\";\r\n        var protoProp = \"prototype\";\r\n        var elemCtrProto = window.Element[protoProp];\r\n        var objCtr = Object;\r\n        var strTrim = String.prototype.trim || function () {\r\n            var rx = new RegExp(\"^\\\\s+|\\\\s+$\", \"g\");\r\n            return this.replace(rx, '');\r\n        };\r\n        var arrIndexOf = Array[protoProp].indexOf || function (item) {\r\n            var\r\n            i = 0\r\n            , len = this.length\r\n            ;\r\n            for (; i < len; i++) {\r\n                if (i in this && this[i] === item) {\r\n                    return i;\r\n                }\r\n            }\r\n            return -1;\r\n        }\r\n        // Vendors: please allow content code to instantiate DOMExceptions\r\n        , DOMEx = function (type, message) {\r\n            this.name = type;\r\n            this.code = DOMException[type];\r\n            this.message = message;\r\n        }\r\n        , checkTokenAndGetIndex = function (classList, token) {\r\n            if (token === \"\") {\r\n                throw new DOMEx(\r\n                    \"SYNTAX_ERR\"\r\n                    , \"An invalid or illegal string was specified\"\r\n                );\r\n            }\r\n            if ((new RegExp(\"\\\\s\")).test(token)) {\r\n                throw new DOMEx(\r\n                    \"INVALID_CHARACTER_ERR\"\r\n                    , \"String contains an invalid character\"\r\n                );\r\n            }\r\n            return arrIndexOf.call(classList, token);\r\n        }\r\n        , ClassList = function (elem) {\r\n            var\r\n            trimmedClasses = strTrim.call(elem.getAttribute(\"class\") || \"\")\r\n            , classes = trimmedClasses ? trimmedClasses.split(new RegExp(\"\\\\s+\")) : []\r\n            , i = 0\r\n            , len = classes.length\r\n            ;\r\n            for (; i < len; i++) {\r\n                this.push(classes[i]);\r\n            }\r\n            this._updateClassName = function () {\r\n                elem.setAttribute(\"class\", this.toString());\r\n            };\r\n        }\r\n        , classListProto = ClassList[protoProp] = []\r\n        , classListGetter = function () {\r\n            return new ClassList(this);\r\n        }\r\n        ;\r\n\r\n        // Most DOMException implementations don't allow calling DOMException's toString()\r\n        // on non-DOMExceptions. Error's toString() is sufficient here.\r\n        DOMEx[protoProp] = Error[protoProp];\r\n        classListProto.item = function (i) {\r\n            return this[i] || null;\r\n        };\r\n        classListProto.contains = function (token) {\r\n            token += \"\";\r\n            return checkTokenAndGetIndex(this, token) !== -1;\r\n        };\r\n        classListProto.add = function () {\r\n            var\r\n            tokens = arguments\r\n            , i = 0\r\n            , l = tokens.length\r\n            , token\r\n            , updated = false\r\n            ;\r\n            do {\r\n                token = tokens[i] + \"\";\r\n                if (checkTokenAndGetIndex(this, token) === -1) {\r\n                    this.push(token);\r\n                    updated = true;\r\n                }\r\n            }\r\n            while (++i < l);\r\n\r\n            if (updated) {\r\n                this._updateClassName();\r\n            }\r\n        };\r\n        classListProto.remove = function () {\r\n            var\r\n            tokens = arguments\r\n            , i = 0\r\n            , l = tokens.length\r\n            , token\r\n            , updated = false\r\n            , index\r\n            ;\r\n            do {\r\n                token = tokens[i] + \"\";\r\n                index = checkTokenAndGetIndex(this, token);\r\n                while (index !== -1) {\r\n                    this.splice(index, 1);\r\n                    updated = true;\r\n                    index = checkTokenAndGetIndex(this, token);\r\n                }\r\n            }\r\n            while (++i < l);\r\n\r\n            if (updated) {\r\n                this._updateClassName();\r\n            }\r\n        };\r\n        classListProto.toggle = function (token, force) {\r\n            token += \"\";\r\n\r\n            var\r\n            result = this.contains(token)\r\n            , method = result ?\r\n                force !== true && \"remove\"\r\n                :\r\n                force !== false && \"add\"\r\n            ;\r\n\r\n            if (method) {\r\n                this[method](token);\r\n            }\r\n\r\n            if (force === true || force === false) {\r\n                return force;\r\n            } else {\r\n                return !result;\r\n            }\r\n        };\r\n        classListProto.toString = function () {\r\n            return this.join(\" \");\r\n        };\r\n\r\n        if (objCtr.defineProperty) {\r\n            var classListPropDesc = {\r\n                get: classListGetter, enumerable: true, configurable: true\r\n            };\r\n            try {\r\n                objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\r\n            } catch (ex) { // IE 8 doesn't support enumerable:true\r\n                if (ex.number === -0x7FF5EC54) {\r\n                    classListPropDesc.enumerable = false;\r\n                    objCtr.defineProperty(elemCtrProto, classListProp, classListPropDesc);\r\n                }\r\n            }\r\n        } else if (objCtr[protoProp].__defineGetter__) {\r\n            elemCtrProto.__defineGetter__(classListProp, classListGetter);\r\n        }\r\n    }());\r\n} else {\r\n    // There is full or partial native classList support, so just check if we need\r\n    // to normalize the add/remove and toggle APIs.\r\n    (function () {\r\n        \"use strict\";\r\n\r\n        var testElement = window.document.createElement(\"_\");\r\n\r\n        testElement.classList.add(\"c1\", \"c2\");\r\n\r\n        // Polyfill for IE 10/11 and Firefox <26, where classList.add and\r\n        // classList.remove exist but support only one argument at a time.\r\n        if (!testElement.classList.contains(\"c2\")) {\r\n            var createMethod = function(method) {\r\n                var original = DOMTokenList.prototype[method];\r\n\r\n                DOMTokenList.prototype[method] = function(token) {\r\n                    var i, len = arguments.length;\r\n\r\n                    for (i = 0; i < len; i++) {\r\n                        token = arguments[i];\r\n                        original.call(this, token);\r\n                    }\r\n                };\r\n            };\r\n            createMethod('add');\r\n            createMethod('remove');\r\n        }\r\n\r\n        testElement.classList.toggle(\"c3\", false);\r\n\r\n        // Polyfill for IE 10 and Firefox <24, where classList.toggle does not\r\n        // support the second argument.\r\n        if (testElement.classList.contains(\"c3\")) {\r\n            var _toggle = DOMTokenList.prototype.toggle;\r\n\r\n            DOMTokenList.prototype.toggle = function(token, force) {\r\n                if (1 in arguments && !this.contains(token) === !force) {\r\n                    return force;\r\n                } else {\r\n                    return _toggle.call(this, token);\r\n                }\r\n            };\r\n\r\n        }\r\n        testElement = null;\r\n    }());\r\n}\r\n }\r\n","window['#x-widget']=function(exports,module){  \"use strict\";\r\n\r\n\r\nmodule.exports = function(id, modName, args) {\r\n    var dst = document.getElementById(id);\r\n    if (!dst) {\r\n        // This widget does not exist!\r\n        return;\r\n    }\r\n    var module = require(modName);\r\n    var src = new module(args);\r\n    src.element().$ctrl = src;\r\n    src = src.element();\r\n    src.setAttribute('id', id);\r\n    dst.parentNode.replaceChild(src, dst);\r\n};\r\n }\r\n","window['#theatre100']=function(exports,module){  \"use strict\";\nvar Widget = require(\"wdg\");\nvar D = Widget.div;\n\n/**\n * @example\n * var Theatre100 = require(\"theatre100\");\n * var instance = new Theatre100();\n * @class Theatre100\n */\nvar Theatre100 = function() {\n    var that = this;\n\n    Widget.call(this);\n    this.addClass(\"theatre100\");\n    var tbl = D('tbl');\n    var rows, cols, index = 0;\n    var row, cell;\n    var cells = [];\n    for (rows = 0 ; rows < 10 ; rows++) {\n        row = D();\n        for (cols = 0 ; cols < 10 ; cols++) {\n            cell = D().text((index < 10 ? '0' : '') + index++);\n            row.append(cell);            \n            cells.push(cell);\n        }\n        tbl.append(row);\n    }\n    tbl.Tap(function() {\n        that.refresh();\n    });\n    this.append(tbl, D().text(\"Cliquez sur la grille pour lancer une autre simulation.\"));\n    this._cells = cells;\n    this.refresh();\n};\n\n// Extension of Widget.\nTheatre100.prototype = Object.create(Widget.prototype);\nTheatre100.prototype.constructor = Theatre100;\n\n/**\n * @return void\n */\nTheatre100.prototype.refresh = function() {\n    var that = this;\n\n    var places = [];\n    this._cells.forEach(function (cell, idx) {\n        cell.removeClass('ok', 'ko').text((idx < 10 ? '0' : '') + idx);\n        places.push(-1);\n    });\n    places.index = 0;\n    this._places = places;\n    if (this._interval) {\n        clearInterval(this._interval);\n    }\n    this._delay = 1;\n    this._interval = setInterval(function() {\n        // All the step must not have the same rate.\n        // We want green cell to be displayed fast but not red ones.\n        // Then after a red cell, we set `this._delay` to a bigger value than 1.\n        this._delay--;\n        if (this._delay > 0) return;\n\n        this._delay = 1;\n        var P = that._places;\n        if (P.index >= P.length) {\n            clearInterval(that._interval);\n            that._interval = 0;\n        } else {\n            var pos, rnd;\n            var cells = that._cells;\n            if (P.index == 0) {\n                // First player seats randomly.\n                pos = Math.floor(Math.random() * P.length);\n                P[pos] = 0;\n                cells[pos].addClass(pos == 0 ? 'ok' : 'ko').text('00');\n                if (pos != 0) this._delay = 25;\n            } else {\n                // Second player try to seat at its place.\n                if (P[P.index] < 0) {\n                    P[P.index] = P.index;\n                    cells[P.index].addClass('ok');\n                } else {\n                    // The place is occupied, lets seat randomly.\n                    rnd = Math.floor(Math.random() * (P.length - P.index));\n                    for (pos = 0 ; pos < P.length ; pos++) {\n                        if (P[pos] < 0) {\n                            if (rnd == 0) {\n                                P[pos] = P.index;\n                                cells[pos].addClass('ko').text((P.index < 10 ? '0' : '') + P.index);\n                                this._delay = 25;\n                                break;                              \n                            } else {\n                                rnd--;\n                            }\n                        }\n                    }\n                }\n            }\n            P.index++;\n            if (P.index == P.length - 1) this._delay = 150;\n        }\n    }, 20);\n};\n\n\n\nTheatre100.create = function() {\n    return new Theatre100();\n};\nmodule.exports = Theatre100;\n }\r\n"],"names":["addListener","e","l","window","addEventListener","attachEvent","require","modules","id","body","mod","err","Error","console","error","stack","exports","document","parentNode","$data","x","size","window","exports","module","config","name","description","author","version","major","minor","revision","date","Date","currentLang","lang","undefined","localStorage","getItem","navigator","language","browserLanguage","substr","toLowerCase","setItem","intl","words","params","txt","newTxt","i","c","lastIdx","pos","dic","k","length","charAt","substring","charCodeAt","window","exports","module","hasMathMLSupport","box","div","document","createElement","innerHTML","body","appendChild","firstChild","getBoundingClientRect","removeChild","Math","abs","height","width","polyfill","node","mathmlNodes","querySelectorAll","i","length","parentNode","replaceChild","transform","root","e","className","console","log","warn","window","exports","module","recurse","values","number","length","this","add","i","args","_args","call","size","Widget","require","Main","addClass","push","_count","_wins","append","toFixed","prototype","Object","create","constructor","forEach","index","span","tag","text","window","exports","module","Widget","options","this","__data","e","innerHTML","childNodes","element","tag","id","document","getElementById","Error","createElement","addClass","ex","console","error","JSON","stringify","prototype","v","undefined","_element","querySelector","data","k","detach","p","parentNode","removeChild","addEvent","name","slot","sender","key","x","f","call","addEventListener","evt","preventDefault","stopPropagation","removeAttr","i","arg","arguments","length","removeAttribute","hasAttribute","attr","val","ns","getAttribute","className","setAttributeNS","setAttribute","text","css","style","insertAfter","target","insertBefore","nextSibling","append","createTextNode","Array","isArray","forEach","item","appendChild","appendTo","parent","onAppend","appendToBody","body","hasClass","classList","contains","trim","add","removeClass","remove","toggleClass","toggle","clear","firstChild","child","nodeType","nodeValue","html","focus","rect","getBoundingClientRect","Tap","_Tap","that","activatePointerEvents","_pointerEvents","start","pe","touch","Date","now","tap","delta","div","isInDOM","create","args","find","query","svg","attribs","namespace","createElementNS","w","version","viewBox","width","height","fromTextOrHtml","txt","span","substr","testElement","createMethod","method","original","DOMTokenList","token","len","_toggle","force","classListProp","protoProp","elemCtrProto","Element","objCtr","Object","strTrim","String","rx","RegExp","replace","arrIndexOf","indexOf","DOMEx","type","message","code","DOMException","checkTokenAndGetIndex","test","ClassList","elem","trimmedClasses","classes","split","push","_updateClassName","toString","classListProto","classListGetter","tokens","l","updated","index","splice","result","join","defineProperty","classListPropDesc","get","enumerable","configurable","number","__defineGetter__","window","exports","module","id","modName","args","dst","document","getElementById","require","src","element","$ctrl","setAttribute","parentNode","replaceChild","window","exports","module","Widget","require","D","div","Theatre100","that","this","call","addClass","rows","cols","row","cell","tbl","index","cells","text","append","push","Tap","refresh","_cells","prototype","Object","create","constructor","places","forEach","idx","removeClass","_places","_interval","clearInterval","_delay","setInterval","P","length","pos","rnd","Math","floor","random"],"mappings":"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"}